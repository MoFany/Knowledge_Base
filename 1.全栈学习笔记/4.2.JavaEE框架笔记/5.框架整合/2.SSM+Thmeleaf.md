# SSM整合Thmeleaf

## SSM整合`配置法`

>#### com.mofany
>
>* controller`MyController`
>
>  ```java
>  package com.mofany.controller;
>  
>  import com.mofany.entity.Student;
>  import com.mofany.service.StudentService;
>  import org.springframework.beans.factory.annotation.Autowired;
>  import org.springframework.stereotype.Controller;
>  import org.springframework.web.bind.annotation.GetMapping;
>  import org.springframework.web.bind.annotation.PathVariable;
>  import org.springframework.web.bind.annotation.RequestMapping;
>  import org.springframework.web.servlet.ModelAndView;
>  
>  import java.util.List;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/1/4
>   * @description MyController 自定义控制器
>   */
>  @Controller
>  @RequestMapping("student")
>  public class MyController {
>      @Autowired
>      private StudentService studentService;
>  
>      
>  	/**
>  	 * 返回值为视图的的控制器 
>  	 */
>      @GetMapping(value = "{name}")
>      public ModelAndView requestHandler(@PathVariable("name") String name){
>          List<Student> studentList=studentService.selectByName(name);
>          ModelAndView modelAndView=new ModelAndView("student");
>          modelAndView.addObject("studentList",studentList);
>          return modelAndView;
>      }
>  }
>  ```
>
>* entity`Student`
>
>  ```java
>  package com.mofany.entity;
>  
>  import lombok.*;
>  import org.springframework.stereotype.Repository;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/1/4
>   * @description Student 实体
>   */
>  @Setter
>  @Getter
>  @ToString
>  @NoArgsConstructor
>  @AllArgsConstructor
>  @Repository
>  public class Student {
>      private Integer id;
>      private String name;
>      private String sex;
>      private Short age;
>  }
>  ```
>
>* mapper`StudentMapper`
>
>  ```java
>  package com.mofany.mapper;
>  
>  import com.mofany.entity.Student;
>  
>  import java.util.List;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/1/4
>   * @description StudentMapper
>   */
>  public interface StudentMapper {
>      
>      /**
>       * 增
>       * @param student 要添加的学生
>       * */
>      int insertStudent(Student student);
>  
>      /**
>       * 删
>       * @param name 要删除的学生姓名
>       * */
>      int deleteByName(String name);
>  
>      /**
>       * 按id删除
>       * @param id 要删除的学生的id
>       * */
>      int deleteById(int id);
>  
>      /**
>       * 改
>       * @param student 要修改的学生
>       * */
>      int updateById(Student student);
>  
>      /**
>       * 查
>       * @param id 按id查
>       * */
>      Student selectById(int id);
>  
>      /**
>       * 查
>       * @param name 按姓名查
>       * */
>      List<Student> selectByName(String name);
>  
>      /**
>       * 按名称id
>       * @param name 要查的学生的姓名
>       * */
>      List<Integer> selectIdByName(String name);
>  }
>  ```
>
>* service`StudentService`
>
>  ```java
>  package com.mofany.service;
>  
>  import com.mofany.entity.Student;
>  
>  import java.util.List;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/1/4
>   * @description StudentService 
>   */
>  public interface StudentService {
>      /**
>       * 增
>       * @param student 要添加的学生
>       * */
>      int insertStudent(Student student);
>  
>      /**
>       * 删
>       * @param name 要删除的学生姓名
>       * */
>      int deleteByName(String name);
>  
>      /**
>       * 按id删除
>       * @param id 要删除的学生的id
>       * */
>      int deleteById(int id);
>  
>      /**
>       * 改
>       * @param student 要修改的学生
>       * */
>      int updateById(Student student);
>  
>      /**
>       * 查
>       * @param id 按id查
>       * */
>      Student selectById(int id);
>  
>      /**
>       * 查
>       * @param name 按姓名查
>       * */
>      List<Student> selectByName(String name);
>  
>      /**
>       * 按名称id
>       * @param name 要查的学生的姓名
>       * */
>      List<Integer> selectIdByName(String name);
>  }
>  ```
>
>  * impl
>
>    ```java
>    package com.mofany.service.impl;
>    
>    import com.mofany.entity.Student;
>    import com.mofany.mapper.StudentMapper;
>    import org.springframework.beans.factory.annotation.Autowired;
>    import org.springframework.stereotype.Service;
>    import com.mofany.service.StudentService;
>    
>    import java.util.List;
>    
>    /**
>     * @author MoFany-J
>     * @date 2023/1/4
>     * @description StudentServiceImpl
>     */
>    @Service
>    public class StudentServiceImpl implements StudentService {
>    
>        private StudentMapper studentMapper;
>    
>        /**
>         * 构造器注入，且是改bean必须存在
>         * */
>        @Autowired(required = true)
>        private StudentServiceImpl( StudentMapper studentMapper){
>            this.studentMapper=studentMapper;
>        }
>    
>        /**
>         * 增
>         *
>         * @param student 要添加的学生
>         */
>        @Override
>        public int insertStudent(Student student) {
>            return studentMapper.insertStudent(student);
>        }
>    
>        /**
>         * 删
>         *
>         * @param name 要删除的学生姓名
>         */
>        @Override
>        public int deleteByName(String name) {
>            return studentMapper.deleteByName(name);
>        }
>    
>        /**
>         * 按id删除
>         *
>         * @param id 要删除的学生的id
>         */
>        @Override
>        public int deleteById(int id) {
>            return studentMapper.deleteById(id);
>        }
>    
>        /**
>         * 改
>         *
>         * @param student 要修改的学生
>         */
>        @Override
>        public int updateById(Student student) {
>            return studentMapper.updateById(student);
>        }
>    
>        /**
>         * 查
>         *
>         * @param id 按id查
>         */
>        @Override
>        public Student selectById(int id) {
>            return studentMapper.selectById(id);
>        }
>    
>        /**
>         * 查
>         *
>         * @param name 按姓名查
>         */
>        @Override
>        public List<Student> selectByName(String name) {
>            return studentMapper.selectByName(name);
>        }
>    
>        /**
>         * 按名称id
>         *
>         * @param name 要查的学生的姓名
>         */
>        @Override
>        public List<Integer> selectIdByName(String name) {
>            return studentMapper.selectIdByName(name);
>        }
>    }
>    ```
>
>#### resources
>
>* mapper
>
>  * `StudentMapper.xml接口映射文件`:a:
>
>    ```xml
>    <?xml version="1.0" encoding="UTF-8" ?>
>    <!DOCTYPE mapper
>            PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
>            "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
>    
>    <mapper namespace="com.mofany.mapper.StudentMapper">
>        
>        <!--映射结果-->
>        <resultMap id="BaseResultMap" type="com.mofany.entity.Student">
>            <id property="id" column="id"/>
>            <result property="name" column="name"/>
>            <result property="sex" column="sex"/>
>            <result property="age" column="age"/>
>        </resultMap>
>        
>        <!--插入-->
>        <insert id="insertStudent" parameterType="com.mofany.entity.Student">
>            insert into student
>            values (#{id,jdbcType=INTEGER}, #{name,jdbcType=VARCHAR},
>                    #{sex,jdbcType=VARCHAR}, #{age,jdbcType=SMALLINT});
>        </insert>
>        
>        <!--按name删除-->
>        <delete id="deleteByName" parameterType="java.lang.String">
>            delete
>            from student
>            where name = #{name,jdbcType=VARCHAR}
>        </delete>
>        
>        <!--按id删除-->
>        <delete id="deleteById" parameterType="int">
>            delete
>            from student
>            where id=#{id,jdbcType=INTEGER}
>        </delete>
>        
>        <!--按id更新指定字段name,sex,age-->
>        <update id="updateById" parameterType="com.mofany.entity.Student">
>            update student
>            set name=#{name,jdbcType=VARCHAR},
>                sex=#{sex,jdbcType=VARCHAR},
>                age=#{age,jdbcType=SMALLINT}
>            where id = #{id,jdbcType=INTEGER}
>        </update>
>        
>        <!--按id查询-->
>        <select id="selectById" resultMap="BaseResultMap" parameterType="int">
>            select *
>            from student
>            where id = #{id,jdbcType=INTEGER}
>        </select>
>        
>        <!--按name字段查询-->
>        <select id="selectByName" resultMap="BaseResultMap" parameterType="java.lang.String">
>            select *
>            from student
>            where name = #{name,jdbcType=VARCHAR}
>        </select>
>        
>        <!--按name查询id-->
>        <select id="selectIdByName" resultType="java.lang.Integer" 
>                parameterType="java.lang.String">
>            select id
>            from student
>            where name = #{name,jdbcType=VARCHAR}
>        </select>
>    </mapper>
>    ```
>
>* `db.properties`数据源:accept:
>
>  ```properties
>  jdbc.Driver=com.mysql.cj.jdbc.Driver
>  # DatabasesName 数据库名
>  jdbc.Url=jdbc:mysql://localhost:3306/DatabaseName?ServerTimezone=GMT%2B8
>  jdbc.UserName=root
>  jdbc.Password=Jiangmh220
>  ```
>
>* **spring-beans.xml`Spring核心配置文件`:accept:**
>
>  ```xml
>  <?xml version="1.0" encoding="UTF-8"?>
>  <beans xmlns="http://www.springframework.org/schema/beans"
>         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>         xmlns:context="http://www.springframework.org/schema/context"
>         xmlns:tx="http://www.springframework.org/schema/tx"
>         xmlns:aop="http://www.springframework.org/schema/aop"
>         xsi:schemaLocation="http://www.springframework.org/schema/beans
>         http://www.springframework.org/schema/beans/spring-beans.xsd
>         http://www.springframework.org/schema/context
>         https://www.springframework.org/schema/context/spring-context.xsd
>         http://www.springframework.org/schema/tx
>         http://www.springframework.org/schema/tx/spring-tx.xsd
>         http://www.springframework.org/schema/aop
>         https://www.springframework.org/schema/aop/spring-aop.xsd">
>  
>      <!--  配置组件扫描 ：但是得排除@Controller注解 -->
>      <context:component-scan base-package="com.mofany" use-default-filters="true">
>          <context:exclude-filter type="regex" expression="com.mofany.controller"/>
>          <!--<context:exclude-filter type="annotation"
>  						expression="org.springframework.stereotype.Controller"/>-->
>      </context:component-scan>
>  
>      <!--  外部数据源引用  -->
>      <context:property-placeholder location="classpath*:db.properties"/>
>  
>      <!--  配置数据源  -->
>      <bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource">
>          <property name="driverClassName" value="${jdbc.Driver}"/>
>          <property name="url" value="${jdbc.Url}"/>
>          <property name="username" value="${jdbc.UserName}"/>
>          <property name="password" value="${jdbc.Password}"/>
>      </bean>
>  
>      <!--  配置MyBatis，即整合SqlSessionFactory -->
>      <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
>          <!--  数据源  -->
>          <property name="dataSource" ref="dataSource"/>
>          <!--  实体包的类型别名  -->
>          <property name="typeAliasesPackage" value="com.mofany.entity"/>
>          <!--  mapper映射文件  -->
>          <property name="mapperLocations" value="classpath:mapper/*Mapper.xml"/>
>          <!--  插件  -->
>          <property name="plugins">
>              <!--  插件有多个所以是集合  -->
>              <list>
>                  <!--  分页插件  -->
>                  <bean class="com.github.pagehelper.PageInterceptor">
>                      <property name="properties">
>                          <value>
>                              helperDialect=MYSQL
>                          </value>
>                      </property>
>                  </bean>
>              </list>
>          </property>
>      </bean>
>  
>      <!--  配置mapper接口  -->
>      <bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
>          <property name="sqlSessionFactoryBeanName" value="sqlSessionFactory"/>
>          <property name="basePackage" value="com.mofany.mapper"/>
>      </bean>
>  
>      <!--  为数据源添加事务管理器  -->
>      <bean id="transactionManager" 
>            class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
>          <property name="dataSource" ref="dataSource"/>
>      </bean>
>  
>      <!--  为事务配置拦截器  -->
>      <tx:advice id="transactionInterceptor" transaction-manager="transactionManager">
>          <tx:attributes>
>              <!--  拦截查询方法  -->
>              <tx:method name="select*" propagation="NOT_SUPPORTED"/>
>              <!--  拦截新增方法  -->
>              <tx:method name="insert*" propagation="REQUIRED" 
>                         no-rollback-for="java.lang.RuntimeException"/>
>              <!--  拦截删除方法  -->
>              <tx:method name="delete*" propagation="REQUIRED" 
>                         no-rollback-for="java.lang.RuntimeException"/>
>              <!--  拦截更新方法  -->
>              <tx:method name="update*" propagation="REQUIRED" 
>                         no-rollback-for="java.lang.RuntimeException"/>
>          </tx:attributes>
>      </tx:advice>
>  
>      <!--  为事务添加切面  -->
>      <aop:config>
>          <!--  定义切入点  -->
>          <aop:pointcut id="pointCut" expression="execution(* com.mofany.service.impl.*.*(..))"/>
>          <!--  给顾问指定切入点  -->
>          <aop:advisor advice-ref="transactionInterceptor" pointcut-ref="pointCut"/>
>      </aop:config>
>  </beans>
>  ```
>
>* **spring-mvc.xml`SpringMVC核心配置文件`:accept:**
>
>  ```xml
>  <?xml version="1.0" encoding="UTF-8"?>
>  <beans xmlns="http://www.springframework.org/schema/beans"
>         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>         xmlns:context="http://www.springframework.org/schema/context"
>         xmlns:mvc="http://www.springframework.org/schema/mvc"
>         xsi:schemaLocation="http://www.springframework.org/schema/beans 
>         http://www.springframework.org/schema/beans/spring-beans.xsd 
>         http://www.springframework.org/schema/context 
>         https://www.springframework.org/schema/context/spring-context.xsd 
>         http://www.springframework.org/schema/mvc 
>         https://www.springframework.org/schema/mvc/spring-mvc.xsd">
>      
>      <!--  SpringMVC配置文件 (结合了Thymeleaf模版引擎) -->
>      <!--  组件扫描：只扫描控制器所在包  -->
>      <context:component-scan base-package="com.mofany.controller"/>
>  
>      <!--  启用注解驱动  -->
>      <mvc:annotation-driven/>
>  
>      <!--  静态资源放行(多种方法)  -->
>      <mvc:default-servlet-handler/>
>  
>      <!--  Thymeleaf资源模版解析器  -->
>      <bean id="resourceTemplateResolver" 
>            class="org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver">
>          <!--  字符集编码  -->
>          <property name="characterEncoding" value="UTF8"/>
>          <!--  模版模式  -->
>          <property name="templateMode" value="HTML"/>
>          <!--  前缀  -->
>          <property name="prefix" value="/static/view/"/>
>          <!--  后缀  -->
>          <property name="suffix" value=".html"/>
>          <!--  禁止缓存  -->
>          <property name="cacheable" value="false"/>
>      </bean>
>  
>      <!--  Thymeleaf模版引擎  -->
>      <bean id="templateEngine" class="org.thymeleaf.spring5.SpringTemplateEngine">
>          <!--  指定模版解析器  -->
>          <property name="templateResolver" ref="resourceTemplateResolver"/>
>          <!--  启用SpringEL表达式  -->
>          <property name="enableSpringELCompiler" value="true"/>
>      </bean>
>  
>      <!--  Thymeleaf视图解析器  -->
>      <bean id="viewResolver" class="org.thymeleaf.spring5.view.ThymeleafViewResolver">
>          <!--  指定模版引擎  -->
>          <property name="templateEngine" ref="templateEngine"/>
>          <!--  指定字符集编码  -->
>          <property name="characterEncoding" value="UTF8"/>
>      </bean>
>  
>  </beans>
>  ```
>
>* ***webapp***
>
>  * static
>
>    * view`student.html`
>
>      ```html
>      <!DOCTYPE html>
>      <!--suppress ALL-->
>      <html lang="en" xmlns:th="http://www.thymeleaf.org">
>      <head>
>          <meta charset="UTF-8">
>          <title>Title</title>
>      </head>
>      <!--
>      SSM+Thymeleaf整合开发
>      -->
>      <body>
>          <table>
>      		<caption>Student Table</caption>
>          	<thead>
>              	<tr>
>                  	<th>id</th>
>                  	<th>name</th>
>                  	<th>sex</th>
>                  	<th>age</th>
>              	</tr>
>          	</thead>
>          	<tbody>
>              	<tr th:each="student:${studentList}">
>                  	<td th:text="${student.id}"></td>
>                  	<td th:text="${student.name}"></td>
>                  	<td th:text="${student.sex}"></td>
>                  	<td th:text="${student.age}"></td>
>              	</tr>
>          	</tbody>
>      	</table>
>      </body>
>      <!--vue代码-->
>      <script></script>
>      </html>
>      ```
>
>  * WEB-INF
>
>    * `web.xml`:accept:
>
>      ```xml
>      <?xml version="1.0" encoding="UTF-8"?>
>      
>      <web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
>               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>               xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
>                            http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"
>               version="4.0">
>      
>          <!-- 加载Spring核心配置文件 -->
>        <context-param>
>          <param-name>contextConfigLocation</param-name>
>          <param-value>classpath*:spring-beans.xml</param-value>
>        </context-param>
>      
>          <!--  配置上下文加载器监听器  -->
>          <listener>
>              <listener-class>
>                  org.springframework.web.context.ContextLoaderListener
>              </listener-class>
>          </listener>
>      
>          <!--  配置乱码过滤器  -->
>          <filter>
>              <filter-name>characterEncodingFilter</filter-name>
>              <filter-class>
>                  org.springframework.web.filter.CharacterEncodingFilter
>              </filter-class>
>              <init-param>
>                  <param-name>encoding</param-name>
>                  <param-value>utf8</param-value>
>              </init-param>
>              <init-param>
>                  <param-name>forceEncoding</param-name>
>                  <param-value>true</param-value>
>              </init-param>
>          </filter>
>          <filter-mapping>
>              <filter-name>characterEncodingFilter</filter-name>
>              <url-pattern>/*</url-pattern>
>          </filter-mapping>
>      
>          <!--  配置SpringMVC对应的DispatcherServlet  -->
>          <servlet>
>              <servlet-name>dispatcherServlet</servlet-name>
>              <servlet-class>
>                  org.springframework.web.servlet.DispatcherServlet
>              </servlet-class>
>              <init-param>
>                  <param-name>contextConfigLocation</param-name>
>                  <param-value>classpath*:spring-mvc.xml</param-value>
>              </init-param>
>              <load-on-startup>1</load-on-startup>
>          </servlet>
>          <servlet-mapping>
>              <servlet-name>dispatcherServlet</servlet-name>
>              <url-pattern>/</url-pattern>
>          </servlet-mapping>
>      </web-app>
>      ```
>
>  * `index.jsp`
>
>    ```html
>    <%@ page contentType="text/html;charset=utf-8" %>
>    <html>
>    	<body>
>    	<a href="student/汤米谢尔比">查询汤米谢尔比</a>
>    	</body>
>    </html>
>    ```
>
>#### test`StudentServieImplTest`
>
>```java
>package com.mofany.test;
>
>import com.mofany.entity.Student;
>import com.mofany.service.StudentService;
>import org.junit.Test;
>import org.junit.runner.RunWith;
>import org.springframework.beans.factory.annotation.Autowired;
>import org.springframework.test.context.ContextConfiguration;
>import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
>
>import java.util.Arrays;
>
>/**
> * @author MoFany-J
> * @date 2023/1/4
> * @description StudentServiceImplTest 单元测试
> */
>@RunWith(SpringJUnit4ClassRunner.class)
>@ContextConfiguration(locations = {"classpath:spring-beans.xml"})
>public class StudentServiceImplTest {
>    @Autowired
>    private StudentService studentService;
>    @Autowired
>    private Student student;
>
>    /**
>     * 增
>     * */
>    @Test
>    public void test1(){
>        student.setId(null);
>        student.setName("汤米谢尔比");
>        student.setSex("男");
>        student.setAge((short)32);
>        System.out.println(studentService.insertStudent(student));
>    }
>
>    /**
>     * 查
>     * */
>    @Test
>    public void test2(){
>        System.out.println(studentService.selectByName("汤米谢尔比"));
>        System.out.println(studentService.deleteByName("诸葛日照"));
>    }
>
>    /**
>     * 按名称查询id
>     * */
>    @Test
>    public void test3(){
>        studentService.selectIdByName("汤米谢尔比").stream().forEach(System.out::println);
>        studentService.selectIdByName("宋江").stream().forEach(System.out::println);
>    }
>
>    /**
>     * 删
>     * */
>    @Test
>    public void test4(){
>        System.out.println(studentService.deleteByName("汤米谢尔比"));
>        System.out.println(studentService.deleteByName("诸葛日照"));
>    }
>
>    /**
>     * 先按姓名查，查询到的同名学生记录全删除
>     * */
>    @Test
>    public void test5(){
>        studentService.selectIdByName("汤米谢尔比").stream().forEach(studentService::deleteById);
>    }
>
>    /**
>     * 改
>     * */
>    @Test
>    public void test6(){
>        student.setId(1000);
>        student.setName("诸葛日照");
>        student.setSex("男");
>        student.setAge((short)21);
>        System.out.println(studentService.updateById(student));
>    }
>}
>```

## SSM整合`注解法`

>#### com.mofany
>
>* config
>
>  * ***Spring核心配置类:***`SpringBeansConfig`:accept:
>
>    ```java
>    package com.mofany.config;
>    
>    import com.alibaba.druid.pool.DruidDataSource;
>    import com.github.pagehelper.PageInterceptor;
>    import org.apache.ibatis.session.SqlSessionFactory;
>    import org.mybatis.spring.SqlSessionFactoryBean;
>    import org.mybatis.spring.annotation.MapperScan;
>    import org.springframework.beans.factory.annotation.Qualifier;
>    import org.springframework.beans.factory.annotation.Value;
>    import org.springframework.context.annotation.*;
>    import org.springframework.core.io.support.PathMatchingResourcePatternResolver;
>    import org.springframework.jdbc.datasource.DataSourceTransactionManager;
>    import org.springframework.stereotype.Controller;
>    import org.springframework.transaction.annotation.EnableTransactionManagement;
>    
>    import javax.sql.DataSource;
>    import java.util.Properties;
>    
>    /**
>     * @author MoFany-J
>     * @date 2023/1/5
>     * @description SpringBeansConfig SpringBeans.xml核心配置文件
>     */
>    @Configuration
>    /**
>     * 组件扫描
>     */
>    @ComponentScan(
>        	/**
>        	 * 基于包
>        	 */
>            basePackages = {"com.mofany"},
>        	/**
>        	 * 使用默认过滤器
>        	 */
>            useDefaultFilters = true,
>        	/**
>        	 * 依赖排除过滤器
>        	 */
>            excludeFilters = {@ComponentScan.Filter(value = {Controller.class})})
>    /**
>     * 属性源注解
>     */
>    @PropertySource(value = {"classpath:db.properties"})
>    /**
>     * mapper映射器接口扫描
>     */
>    @MapperScan(basePackages = {"com.mofany.mapper"})
>    /**
>     * 开启声明式事务管理器
>     */
>    @EnableTransactionManagement
>    public class SpringBeansConfig {
>    
>        /**
>         * 数据源的成员变量
>         */
>        @Value("${jdbc.Driver}")
>        private String driver;
>        @Value("${jdbc.Url}")
>        private String url;
>        @Value("${jdbc.UserName}")
>        private String userName;
>        @Value("${jdbc.Password}")
>        private String password;
>    
>        /**
>         * 配置数据源
>         * */
>        @Bean(name = "dataSource")
>        @Primary
>        public DataSource setDataSource(){
>            DruidDataSource druidDataSource=new DruidDataSource();
>            druidDataSource.setDriverClassName(driver);
>            druidDataSource.setUrl(url);
>            druidDataSource.setUsername(userName);
>            druidDataSource.setPassword(password);
>            return druidDataSource;
>        }
>    
>        /**
>         * 配置SqlSessionFactory
>         * */
>        @Bean(name = "sqlSessionFactory")
>        public SqlSessionFactory setSqlSessionFactory(@Qualifier("dataSource") DataSource dataSource) throws Exception {
>            SqlSessionFactoryBean sessionFactoryBean=new SqlSessionFactoryBean();
>            sessionFactoryBean.setDataSource(dataSource);
>            sessionFactoryBean.setTypeAliasesPackage("com.mofany.entity");
>            sessionFactoryBean.setMapperLocations(new PathMatchingResourcePatternResolver()
>                                               .getResources("classpath*:mapper/*Mapper.xml"));
>            /**
>             * 创建分页插件实例
>             */
>            PageInterceptor pageInterceptor=new PageInterceptor();
>            Properties properties=new Properties();
>            pageInterceptor.setProperties(properties);
>            sessionFactoryBean.setPlugins(pageInterceptor);
>            return sessionFactoryBean.getObject();
>        }
>    
>        /**
>         * 配置声明式事务管理器
>         * */
>        @Bean(name = "transactionManager")
>        @Primary
>        public DataSourceTransactionManager setTransactionManager(@Qualifier("dataSource") DataSource dataSource){
>            return new DataSourceTransactionManager(dataSource);
>        }
>    
>    }
>    ```
>
>  * ***SpringMVC核心配置类:***`SpringMvcConfig`:accept:
>
>    ```java
>    package com.mofany.config;
>    
>    import org.springframework.beans.factory.annotation.Qualifier;
>    import org.springframework.context.annotation.Bean;
>    import org.springframework.context.annotation.ComponentScan;
>    import org.springframework.context.annotation.Configuration;
>    import org.springframework.context.annotation.Primary;
>    import org.springframework.web.servlet.config.annotation.*;
>    import org.thymeleaf.spring5.SpringTemplateEngine;
>    import org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver;
>    import org.thymeleaf.spring5.view.ThymeleafViewResolver;
>    import org.thymeleaf.templatemode.TemplateMode;
>    
>    /**
>     * @author MoFany-J
>     * @date 2023/1/5
>     * @description SpringMvcConfig SpringMVC.xml核心配置
>     */
>    @Configuration
>    @ComponentScan(basePackages = {"com.mofany.controller"})
>    @EnableWebMvc
>    public class SpringMvcConfig implements WebMvcConfigurer {
>    
>        /**
>         * 配置Thymeleaf资源模版解析器
>         * */
>        @Bean(name = "templateResolver")
>        @Primary
>        public SpringResourceTemplateResolver setTemplateResolver(){
>            
>            SpringResourceTemplateResolver templateResolver=
>                new SpringResourceTemplateResolver();
>            templateResolver.setCharacterEncoding("UTF8");
>            templateResolver.setTemplateMode(TemplateMode.HTML);
>            templateResolver.setPrefix("/static/view/");
>            templateResolver.setSuffix(".html");
>            templateResolver.setCacheable(false);
>            return templateResolver;
>        }
>    
>        /**
>         * 配置Thymeleaf模版引擎
>         * */
>        @Bean(name = "templateEngine")
>        @Primary
>        public SpringTemplateEngine setTemplateEngine(@Qualifier("templateResolver") SpringResourceTemplateResolver templateResolver){
>            
>            SpringTemplateEngine templateEngine=new SpringTemplateEngine();
>            templateEngine.setTemplateResolver(templateResolver);
>            templateEngine.setEnableSpringELCompiler(true);
>            return templateEngine;
>        }
>    
>        /**
>         * 配置Thymeleaf视图解析器
>         * */
>        @Bean(name = "viewResolver")
>        @Primary
>        public ThymeleafViewResolver setViewResolver(@Qualifier("templateEngine") SpringTemplateEngine templateEngine){
>            
>            ThymeleafViewResolver viewResolver=new ThymeleafViewResolver();
>            viewResolver.setCharacterEncoding("UTF8");
>            viewResolver.setTemplateEngine(templateEngine);
>            return viewResolver;
>        }
>    
>        /**
>         * 添加资源处理器(进行静态资源放行)
>         * */
>        @Override
>        public void addResourceHandlers(ResourceHandlerRegistry registry) {
>            
>            registry.addResourceHandler("/static/**")
>                	.addResourceLocations("/static/");
>        }
>    
>        /**
>         * 添加视图控制器（无业务逻辑视图跳转）
>         * */
>        @Override
>        public void addViewControllers(ViewControllerRegistry registry) {
>            
>            //添加视图控制器并指定视图名
>            registry.addViewController("/boot")
>                	.setViewName("boot");
>        }
>    
>        /**
>         * 跨域放行注解 @CrossOrigin
>         * */
>        @Override
>        public void addCorsMappings(CorsRegistry registry) {
>            
>            registry.addMapping("/**")
>                    //允许跨域的源
>                    .allowedOrigins("*")
>                    //允许跨域的方法
>                    .allowedMethods("*")
>                    //允许跨域的请求头
>                    .allowedHeaders("*");
>        }
>    }
>    ```
>
>  * ***Web.xml整合配置类:***`WebIntegrateConfig`:accept:
>
>    ```java
>    package com.mofany.config;
>    
>    import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;
>    
>    /**
>     * @author MoFany-J
>     * @date 2023/1/5
>     * @description WebIntegrateConfig Web.xml整合
>     */
>    public class WebIntegrateConfig extends AbstractAnnotationConfigDispatcherServletInitializer {
>        /**
>         * 获取Spring配置类
>         * */
>        @Override
>        protected Class<?>[] getRootConfigClasses() {
>            return new Class[]{SpringBeansConfig.class};
>        }
>    
>        /**
>         * 获取SpringMVC配置类
>         * */
>        @Override
>        protected Class<?>[] getServletConfigClasses() {
>            return new Class[]{SpringMvcConfig.class};
>        }
>    
>        /**
>         * 获取DispatcherServlet的映射,会将一个或多个路径映射到DispatcherServlet
>         * */
>        @Override
>        protected String[] getServletMappings() {
>            return new String[]{"/"};
>        }
>    }
>    ```
>
>* controller`自定义控制器:MyController`:accept:
>
>  ```java
>  package com.mofany.controller;
>  
>  import com.mofany.entity.Student;
>  import com.mofany.entity.Teacher;
>  import com.mofany.service.StudentService;
>  import com.mofany.service.TeacherService;
>  import org.springframework.beans.factory.annotation.Autowired;
>  import org.springframework.web.bind.annotation.*;
>  
>  import java.util.HashMap;
>  import java.util.List;
>  import java.util.Map;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/1/5
>   * @description MyController 自定义前端请求控制器
>   */
>  @RestController
>  @RequestMapping(value = "shcool")
>  public class MyController {
>  
>      private StudentService studentService;
>      private TeacherService teacherService;
>  
>      /**
>       * 构造器注入
>       * */
>      @Autowired
>      private MyController(StudentService studentService,TeacherService teacherService){
>          this.studentService=studentService;
>          this.teacherService=teacherService;
>      }
>  
>      /**
>       * 学生接口为：student/{name}
>       * */
>      @GetMapping(value = "student/{name}")
>      @ResponseBody
>      public Map<String,Object> studentRequestHandler(@PathVariable("name") String name)  {
>          Map<String,Object> map=new HashMap<>();
>          List<Student> studentList=studentService.selectByName(name);
>          studentList.forEach((student)->{
>              map.put("id",student.getId());
>              map.put("name",student.getName());
>              map.put("sex",student.getSex());
>              map.put("age",student.getAge());
>          });
>          return map;
>      }
>  
>      /**
>       * 老师接口为：teacher/{name}
>       * */
>      @GetMapping(value = "teacher/{name}")
>      @ResponseBody
>      public Map<String,Object> teacherRequestHandler(@PathVariable("name") String name)  {
>          Map<String,Object> map=new HashMap<>();
>          List<Teacher> teacherList=teacherService.selectByName(name);
>          teacherList.forEach((teacher)->{
>              map.put("jobnum",teacher.getJobNum());
>              map.put("name",teacher.getName());
>              map.put("sex",teacher.getSex());
>              map.put("subject",teacher.getSubject());
>          });
>          return map;
>      }
>  }
>  ```
>
>* filter`乱码过滤器:CharacterEncodingFilterUtf8`:accept:
>
>  ```java
>  package com.mofany.filter;
>  
>  
>  import javax.servlet.*;
>  import javax.servlet.annotation.WebFilter;
>  import javax.servlet.http.HttpServletRequest;
>  import javax.servlet.http.HttpServletResponse;
>  import java.io.IOException;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/1/5
>   * @description CharacterEncodingFilterUtf8 自定义编码过滤器
>   */
>  @WebFilter("/*")
>  public class CharacterEncodingFilterUtf8 implements Filter{
>      @Override
>      public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
>          /**
>           * 请求乱码过滤器
>           */
>          HttpServletRequest httpServletRequest=(HttpServletRequest) request;
>          HttpServletResponse httpServletResponse=(HttpServletResponse)response;
>          httpServletRequest.setCharacterEncoding("UTF-8");
>          httpServletResponse.setCharacterEncoding("UTF-8");
>          chain.doFilter(httpServletRequest,httpServletResponse);
>      }
>  }
>  ```
>
>* entity
>
>  * `Student`
>
>    ```java
>    package com.mofany.entity;
>    
>    import lombok.*;
>    import org.springframework.stereotype.Repository;
>    
>    import java.io.Serializable;
>    
>    /**
>     * @author MoFany-J
>     * @date 2023/1/5
>     * @description Student
>     */
>    @Setter
>    @Getter
>    @ToString
>    @NoArgsConstructor
>    @AllArgsConstructor
>    @Repository
>    public class Student implements Serializable {
>        private Integer id;
>        private String name;
>        private String sex;
>        private Short age;
>    }
>    ```
>
>  * `Teacher`
>
>    ```java
>    package com.mofany.entity;
>    
>    import lombok.*;
>    import org.springframework.stereotype.Repository;
>    
>    import java.io.Serializable;
>    
>    /**
>     * @author MoFany-J
>     * @date 2023/1/5
>     * @description Teacher
>     */
>    @Setter
>    @Getter
>    @ToString
>    @NoArgsConstructor
>    @AllArgsConstructor
>    @Repository
>    public class Teacher implements Serializable {
>        private Integer jobNum;
>        private String name;
>        private String sex;
>        private String subject;
>    }
>    ```
>
>* mapper`MyBatis关于实体类数据访问的映射器接口`
>
>  * `StudentMapper`
>
>    ```java
>    package com.mofany.mapper;
>    
>    import com.mofany.entity.Student;
>    
>    import java.util.List;
>    
>    /**
>     * @author MoFany-J
>     * @date 2023/1/5
>     * @description StudentMapper
>     */
>    public interface StudentMapper {
>        /**
>         * 新增
>         *
>         * @param student 新增的学生
>         * */
>        int insertStudent(Student student);
>    
>        /**
>         * 按姓名查
>         *
>         * @param name 由于有同名学生则返回值为集合
>         * */
>        List<Student> selectByName(String name);
>    }
>    ```
>
>  * `TeacherMapper`
>
>    ```java
>    package com.mofany.mapper;
>    
>    import com.mofany.entity.Teacher;
>    
>    import java.util.List;
>    
>    /**
>     * @author MoFany-J
>     * @date 2023/1/5
>     * @description TeacherMapper
>     */
>    public interface TeacherMapper {
>        
>        /**
>         * 新增
>         *
>         * @param teacher 新增的教师
>         * */
>        int insertTeacher(Teacher teacher);
>    	
>        /**
>         * 按姓名查
>         *
>         * @param name 由于有同名教师则返回值为集合
>         * */
>        List<Teacher> selectByName(String name);
>    }
>    ```
>
>* service`业务逻辑层`
>
>  * `StudentService`
>
>    ```java
>    package com.mofany.service;
>    
>    import com.mofany.entity.Student;
>    
>    import java.util.List;
>    
>    /**
>     * @author MoFany-J
>     * @date 2023/1/5
>     * @description StudentService
>     */
>    public interface StudentService {
>        
>        /**
>         * 新增
>         *
>         * @param student 新增的学生
>         * */
>        int insertStudent(Student student);
>    
>        /**
>         * 按姓名查
>         *
>         * @param name 由于有同名学生则返回值为集合
>         * */
>        List<Student> selectByName(String name);
>    }
>    ```
>
>  * `TeacherService`
>
>    ```java
>    package com.mofany.service;
>    
>    import com.mofany.entity.Teacher;
>    
>    import java.util.List;
>    
>    /**
>     * @author MoFany-J
>     * @date 2023/1/5
>     * @description TeacherService
>     */
>    public interface TeacherService {
>        
>        /**
>         * 新增
>         *
>         * @param teacher 新增的教师
>         * */
>        int insertTeacher(Teacher teacher);
>    
>        /**
>         * 按姓名查
>         *
>         * @param name 由于有同名教师则返回值为集合
>         * */
>        List<Teacher> selectByName(String name);
>    }
>    ```
>
>  * impl:accept:
>
>    * `StudentServiceImpl`
>
>      ```java
>      package com.mofany.service.impl;
>      
>      import com.mofany.entity.Student;
>      import com.mofany.mapper.StudentMapper;
>      import com.mofany.service.StudentService;
>      import org.springframework.beans.factory.annotation.Autowired;
>      import org.springframework.stereotype.Service;
>      import org.springframework.transaction.annotation.Propagation;
>      import org.springframework.transaction.annotation.Transactional;
>      
>      import java.util.List;
>      
>      /**
>       * @author MoFany-J
>       * @date 2023/1/5
>       * @description StudentServiceImpl
>       */
>      @Service
>      public class StudentServiceImpl implements StudentService {
>          private StudentMapper studentMapper;
>          /**
>           * 构造器注入,bean实例必须存在
>           * */
>          @Autowired(required = true)
>          private StudentServiceImpl(StudentMapper studentMapper){
>              this.studentMapper=studentMapper;
>          }
>      
>          /**
>           * 新增
>           *
>           * @param student 新增的学生(给指定方法加事务)
>           */
>          @Transactional(
>              propagation = Propagation.REQUIRED,rollbackFor=java.lang.RuntimeException.class
>          )
>          @Override
>          public int insertStudent(Student student) {
>              return studentMapper.insertStudent(student);
>          }
>      
>          /**
>           * 按姓名查
>           *
>           * @param name 由于有同名学生则返回值为集合
>           */
>          @Override
>          public List<Student> selectByName(String name) {
>              return studentMapper.selectByName(name);
>          }
>      }
>      ```
>
>    * `TeacherServiceImpl`
>
>      ```java
>      package com.mofany.service.impl;
>      
>      import com.mofany.entity.Teacher;
>      import com.mofany.mapper.TeacherMapper;
>      import com.mofany.service.TeacherService;
>      import org.springframework.beans.factory.annotation.Autowired;
>      import org.springframework.stereotype.Service;
>      import org.springframework.transaction.annotation.Propagation;
>      import org.springframework.transaction.annotation.Transactional;
>      
>      import java.util.List;
>      
>      /**
>       * @author MoFany-J
>       * @date 2023/1/5
>       * @description TeacherServiceImpl
>       */
>      @Service
>      public class TeacherServiceImpl implements TeacherService {
>          private TeacherMapper teacherMapper;
>          /**
>           * 构造器注入,bean实例必须存在
>           * */
>          @Autowired
>          private TeacherServiceImpl(TeacherMapper teacherMapper){
>              this.teacherMapper=teacherMapper;
>          }
>      
>          /**
>           * 新增
>           *
>           * @param teacher 新增的教师(给指定方法加事务)
>           */
>          @Transactional(
>              propagation = Propagation.REQUIRED,rollbackFor=java.lang.RuntimeException.class
>          )
>          @Override
>          public int insertTeacher(Teacher teacher) {
>              return teacherMapper.insertTeacher(teacher);
>          }
>      
>          /**
>           * 按姓名查
>           *
>           * @param name 由于有同名教师则返回值为集合
>           */
>          @Override
>          public List<Teacher> selectByName(String name) {
>              return teacherMapper.selectByName(name);
>          }
>      }
>      ```
>
>#### resources
>
>* mapper`接口映射器`:accept:
>
>  * `StudentMapper.xml`
>
>    ```xml
>    <?xml version="1.0" encoding="UTF-8" ?>
>    <!DOCTYPE mapper
>            PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
>            "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
>    <mapper namespace="com.mofany.mapper.StudentMapper">
>        <!--结果集映射-->
>        <resultMap id="StudentResultMap" type="com.mofany.entity.Student">
>            <id property="id" column="id"/>
>            <result property="name" column="name"/>
>            <result property="sex" column="sex"/>
>            <result property="age" column="age"/>
>        </resultMap>
>        
>        <!--插入新实体-->
>        <insert id="insertStudent" parameterType="com.mofany.entity.Student">
>            insert into student
>            values (#{id,jdbcType=INTEGER},
>                    #{name,jdbcType=VARCHAR},
>                    #{sex,jdbcType=VARCHAR},
>                    #{age,jdbcType=SMALLINT})
>        </insert>
>        
>        <!--按姓名查询-->
>        <select id="selectByName" parameterType="java.lang.String" 
>                resultMap="StudentResultMap">
>            select *
>            from student
>            where name = #{name,jdbcType=VARCHAR}
>        </select>
>    </mapper>
>    ```
>
>  * `TeacherMapper.xml`
>
>    ```xml
>    <?xml version="1.0" encoding="UTF-8" ?>
>    <!DOCTYPE mapper
>            PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
>            "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
>    <mapper namespace="com.mofany.mapper.TeacherMapper">
>        
>        <!--结果集映射-->
>        <resultMap id="TeacherResultMap" type="com.mofany.entity.Teacher">
>            <id property="jobNum" column="jobNum"/>
>            <result property="name" column="name"/>
>            <result property="sex" column="sex"/>
>            <result property="subject" column="subject"/>
>        </resultMap>
>        
>        <!--插入新实体-->
>        <insert id="insertTeacher" parameterType="com.mofany.entity.Teacher">
>            insert into teacher
>            values (#{jobNum,jdbcType=INTEGER},
>                    #{name,jdbcType=VARCHAR},
>                    #{sex,jdbcType=VARCHAR},
>                    #{subject,jdbcType=VARCHAR})
>        </insert>
>        
>        <!--按姓名查询-->
>        <select id="selectByName" parameterType="java.lang.String" 
>                resultMap="TeacherResultMap">
>            select *
>            from teacher
>            where name = #{name,jdbcType=VARCHAR}
>        </select>
>    </mapper>
>    ```
>
>* `db.properties`
>
>  ```properties
>  jdbc.Driver=com.mysql.cj.jdbc.Driver
>  # DatabasesName 数据库名
>  jdbc.Url=jdbc:mysql://localhost:3306/DatebasesName?ServerTimezone=GMT%2B8
>  jdbc.UserName=root
>  jdbc.Password=Jiangmh220
>  ```
>
>#### test单元测试`ServiceImplTest`
>
>```java
>package com.mofany.test;
>
>import com.mofany.config.SpringBeansConfig;
>import com.mofany.entity.Student;
>import com.mofany.entity.Teacher;
>import com.mofany.service.StudentService;
>import com.mofany.service.TeacherService;
>import org.junit.Test;
>import org.junit.runner.RunWith;
>import org.springframework.beans.factory.annotation.Autowired;
>import org.springframework.test.context.ContextConfiguration;
>import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
>import org.springframework.test.context.web.WebAppConfiguration;
>
>/**
> * @author MoFany-J
> * @date 2023/1/5
> * @description ServiceImplTest
> */
>@RunWith(SpringJUnit4ClassRunner.class)
>@ContextConfiguration(classes = {SpringBeansConfig.class})
>@WebAppConfiguration("src/main/resources")
>public class ServiceImplTest {
>    
>    @Autowired
>    private Student student;
>    @Autowired
>    private Teacher teacher;
>    @Autowired
>    private StudentService studentService;
>    @Autowired
>    private TeacherService teacherService;
>
>    /**
>     * 按name查询
>     */
>    @Test
>    public void test1(){
>        studentService.selectByName("海波东").stream().forEach(System.out::println);
>    }
>
>    /**
>     * 插入新记录
>     */
>    @Test
>    public void test2(){
>        student.setId(null);
>        student.setName("砝码");
>        student.setSex("男");
>        student.setAge((short)66);
>        studentService.insertStudent(student);
>    }
>    
>    /**
>     * 按name查询
>     */
>    @Test
>    public void test3(){
>        teacherService.selectByName("默凡语").stream().forEach(System.out::println);
>    }
>
>    /**
>     * 插入新记录
>     */
>    @Test
>    public void test4(){
>        teacher.setJobNum(7);
>        teacher.setName("承太郎");
>        teacher.setSex("男");
>        teacher.setSubject("大学日语");
>        teacherService.insertTeacher(teacher);
>    }
>}
>```