# Spring+SpringMVC整合MyBatis:dagger:

## SSM配置法`核心xml配置`

>#### Spring核心配置:`spring-beans.xml`
>
>* `db.properties`数据源
>
>  ```properties
>  jdbc.Driver=com.mysql.cj.jdbc.Driver
>  # DatabasesName 数据库名
>  jdbc.Url=jdbc:mysql://localhost:3306/DatabaseName?ServerTimezone=GMT%2B8
>  jdbc.UserName=UserNam
>  jdbc.Password=Password
>  ```
>
>* `spring-beans.xml`
>
>  ```xml
>  <?xml version="1.0" encoding="UTF-8"?>
>  <beans xmlns="http://www.springframework.org/schema/beans"
>         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>         xmlns:context="http://www.springframework.org/schema/context"
>         xmlns:tx="http://www.springframework.org/schema/tx"
>         xmlns:aop="http://www.springframework.org/schema/aop"
>         xsi:schemaLocation="http://www.springframework.org/schema/beans
>         http://www.springframework.org/schema/beans/spring-beans.xsd
>         http://www.springframework.org/schema/context
>         https://www.springframework.org/schema/context/spring-context.xsd
>         http://www.springframework.org/schema/tx
>         http://www.springframework.org/schema/tx/spring-tx.xsd
>         http://www.springframework.org/schema/aop
>         https://www.springframework.org/schema/aop/spring-aop.xsd">
>  
>      <!--  配置组件扫描 ：但是得排除@Controller注解 -->
>      <context:component-scan base-package="com.mofany" use-default-filters="true">
>          <context:exclude-filter type="regex" expression="com.mofany.controller"/>
>          <!--<context:exclude-filter type="annotation"
>  						expression="org.springframework.stereotype.Controller"/>-->
>      </context:component-scan>
>  
>      <!--  外部数据源引用  -->
>      <context:property-placeholder location="classpath*:db.properties"/>
>  
>      <!--  配置数据源  -->
>      <bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource">
>          <property name="driverClassName" value="${jdbc.Driver}"/>
>          <property name="url" value="${jdbc.Url}"/>
>          <property name="username" value="${jdbc.UserName}"/>
>          <property name="password" value="${jdbc.Password}"/>
>      </bean>
>  
>      <!--  配置MyBatis，即整合SqlSessionFactory -->
>      <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
>          <!--  数据源  -->
>          <property name="dataSource" ref="dataSource"/>
>          <!--  实体包的类型别名  -->
>          <property name="typeAliasesPackage" value="com.mofany.entity"/>
>          <!--  mapper映射文件  -->
>          <property name="mapperLocations" value="classpath:mapper/*Mapper.xml"/>
>          <!--  插件  -->
>          <property name="plugins">
>              <!--  插件有多个所以是集合  -->
>              <list>
>                  <!--  分页插件  -->
>                  <bean class="com.github.pagehelper.PageInterceptor">
>                      <property name="properties">
>                          <value>
>                              helperDialect=MYSQL
>                          </value>
>                      </property>
>                  </bean>
>              </list>
>          </property>
>      </bean>
>  
>      <!--  配置mapper接口  -->
>      <bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
>          <property name="sqlSessionFactoryBeanName" value="sqlSessionFactory"/>
>          <property name="basePackage" value="com.mofany.mapper"/>
>      </bean>
>  
>      <!--  为数据源添加事务管理器  -->
>      <bean id="transactionManager" 
>            class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
>          <property name="dataSource" ref="dataSource"/>
>          
>      </bean>
>  
>      <!--  为事务配置拦截器  -->
>      <tx:advice id="transactionInterceptor" transaction-manager="transactionManager">
>          <tx:attributes>
>              <!--  拦截查询方法  -->
>              <tx:method name="select*" propagation="NOT_SUPPORTED"/>
>              <!--  拦截新增方法  -->
>              <tx:method name="insert*" propagation="REQUIRED" 
>                         no-rollback-for="java.lang.RuntimeException"/>
>              <!--  拦截删除方法  -->
>              <tx:method name="delete*" propagation="REQUIRED" 
>                         no-rollback-for="java.lang.RuntimeException"/>
>              <!--  拦截更新方法  -->
>              <tx:method name="update*" propagation="REQUIRED" 
>                         no-rollback-for="java.lang.RuntimeException"/>
>          </tx:attributes>
>      </tx:advice>
>  
>      <!--  为事务添加切面 Aop -->
>      <aop:config>
>          <!--  定义切入点，切入点可以定义多个 -->
>          <aop:pointcut id="pointCut" expression="execution(* com.mofany.service.impl.*.*(..))"/>
>          <!--  给顾问指定切入点  -->
>          <aop:advisor advice-ref="transactionInterceptor" pointcut-ref="pointCut"/>
>      </aop:config>
>  </beans>
>  ```
>
>#### SpringMVC核心配置:`spring-mvc.xml`
>
>```xml
><?xml version="1.0" encoding="UTF-8"?>
><beans xmlns="http://www.springframework.org/schema/beans"
>       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>       xmlns:context="http://www.springframework.org/schema/context"
>       xmlns:mvc="http://www.springframework.org/schema/mvc"
>       xsi:schemaLocation="http://www.springframework.org/schema/beans 
>       http://www.springframework.org/schema/beans/spring-beans.xsd 
>       http://www.springframework.org/schema/context 
>       https://www.springframework.org/schema/context/spring-context.xsd 
>       http://www.springframework.org/schema/mvc 
>       https://www.springframework.org/schema/mvc/spring-mvc.xsd">
>    
>    <!--  SpringMVC配置文件 -->
>    <!--  组件扫描：只扫描控制器所在包  -->
>    <context:component-scan base-package="com.mofany.controller"/>
>
>    <!--  启用注解驱动  -->
>    <mvc:annotation-driven/>
>
>    <!--  静态资源放行(多种方法)  -->
>    <mvc:default-servlet-handler/>
>    
>    <!--  指定视图解析器  -->
>    <bean id="viewResolver"
>          class="org.springframework.web.servlet.view.InternalResourceViewResolver">
>        <!--  指定前缀  -->
>        <property name="prefix" value="/static/view/"/>
>        <!--  指定后缀  -->
>        <property name="suffix" value=".jsp"/>
>    </bean>
>
></beans>
>```
>
>#### web核心配置:`web.xml`
>
>```xml
><?xml version="1.0" encoding="UTF-8"?>
>
><web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
>         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
>                      http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"
>         version="4.0">
>
>    <!-- 加载Spring核心配置文件 -->
>  	<context-param>
>    	<param-name>contextConfigLocation</param-name>
>    	<param-value>classpath*:spring-beans.xml</param-value>
>  	</context-param>
>
>    <!--  配置上下文加载器监听器  -->
>    <listener>
>        <listener-class>
>            org.springframework.web.context.ContextLoaderListener
>        </listener-class>
>    </listener>
>
>    <!--  配置乱码过滤器  -->
>    <filter>
>        <filter-name>characterEncodingFilter</filter-name>
>        <filter-class>
>            org.springframework.web.filter.CharacterEncodingFilter
>        </filter-class>
>        <init-param>
>            <param-name>encoding</param-name>
>            <param-value>utf8</param-value>
>        </init-param>
>        <init-param>
>            <param-name>forceEncoding</param-name>
>            <param-value>true</param-value>
>        </init-param>
>    </filter>
>    <filter-mapping>
>        <filter-name>characterEncodingFilter</filter-name>
>        <url-pattern>/*</url-pattern>
>    </filter-mapping>
>
>    <!--  配置SpringMVC对应的DispatcherServlet  -->
>    <servlet>
>        <servlet-name>dispatcherServlet</servlet-name>
>        <servlet-class>
>            org.springframework.web.servlet.DispatcherServlet
>        </servlet-class>
>        <init-param>
>            <param-name>contextConfigLocation</param-name>
>            <param-value>classpath*:spring-mvc.xml</param-value>
>        </init-param>
>        <load-on-startup>1</load-on-startup>
>    </servlet>
>    <servlet-mapping>
>        <servlet-name>dispatcherServlet</servlet-name>
>        <url-pattern>/</url-pattern>
>    </servlet-mapping>
></web-app>
>```

# SSM注解法`核心配置类`:jack_o_lantern:

## 利用注解整合SSM+拦截器+文件上传

>* **外部数据源**`db.properties`
>
>  ```properties
>  jdbc.Driver=com.mysql.cj.jdbc.Driver
>  jdbc.Url=jdbc:mysql://localhost:3306/java67?ServerTimezone=GTM%2B8
>  jdbc.UserName=root
>  jdbc.Password=Jiangmh220
>  ```
>
>#### Spring核心配置类`SpringBeansConfig`
>
>```java
>package com.mofany.config;
>
>import com.alibaba.druid.pool.DruidDataSource;
>import com.github.pagehelper.PageInterceptor;
>import org.mybatis.spring.SqlSessionFactoryBean;
>import org.mybatis.spring.annotation.MapperScan;
>import org.springframework.beans.factory.annotation.Qualifier;
>import org.springframework.beans.factory.annotation.Value;
>import org.springframework.context.annotation.*;
>import org.springframework.core.io.support.PathMatchingResourcePatternResolver;
>import org.springframework.jdbc.datasource.DataSourceTransactionManager;
>import org.springframework.stereotype.Controller;
>import org.springframework.transaction.annotation.EnableTransactionManagement;
>
>import javax.sql.DataSource;
>import java.io.IOException;
>import java.util.Properties;
>
>/**
> * @author MoFany-J
> * @date 2023/1/23
> * @description SpringBeansConfig 自定义Spring配置类
> */
>@Configuration
>@ComponentScan(
>        basePackages = {"com.mofany"},
>        useDefaultFilters = true,
>        excludeFilters = {@ComponentScan.Filter(value = Controller.class)}
>) // 组件扫描
>
>@MapperScan(basePackages = {"com.mofany.mapper"}) //mapper接口扫描
>@PropertySource(value = {"classpath:db.properties"}) // 属性源，即数据源
>@EnableTransactionManagement // 开启声明式事务
>public class SpringBeansConfig {
>
>    /**
>     * 数据源属性成员变量
>     * */
>    @Value("${jdbc.Driver}")
>    private String driver;
>    @Value("${jdbc.Url}")
>    private String url;
>    @Value("${jdbc.UserName}")
>    private String userName;
>    @Value("${jdbc.Password}")
>    private String password;
>
>    /**
>     * 数据源
>     * */
>    @Bean(name = "dataSource")
>    @Primary
>    public DataSource setDataSource(){
>        DruidDataSource druidDataSource=new DruidDataSource();
>        druidDataSource.setDriverClassName(driver);
>        druidDataSource.setUrl(url);
>        druidDataSource.setUsername(userName);
>        druidDataSource.setPassword(password);
>        return druidDataSource;
>    }
>
>    /**
>     * 配置SqlSessionFactory
>     * */
>    @Bean(name = "sqlSessionFactory")
>    @Primary
>    public SqlSessionFactoryBean setSqlSessionFactory(@Qualifier("dataSource") DataSource dataSource) throws IOException {
>        SqlSessionFactoryBean sqlSessionFactoryBean=new SqlSessionFactoryBean();
>        sqlSessionFactoryBean.setDataSource(dataSource);
>        sqlSessionFactoryBean.setTypeAliasesPackage("com.mofany.entity");
>        sqlSessionFactoryBean.setMapperLocations(
>                new PathMatchingResourcePatternResolver()
>            .getResources("classpath*:mapper/*Mapper.xml"));
>        //设置插件
>        PageInterceptor pageInterceptor=new PageInterceptor();
>        Properties properties=new Properties();
>        properties.setProperty("helperDialect", "MYSQL");
>        pageInterceptor.setProperties(properties);
>        sqlSessionFactoryBean.setPlugins(pageInterceptor);
>        return sqlSessionFactoryBean;
>    }
>
>    /**
>     * 配置事务管理器
>     * */
>    @Bean(name = "transactionManager")
>    @Primary
>    public DataSourceTransactionManager setDataSourceTransactionManager(@Qualifier("dataSource") DataSource dataSource){
>        return new DataSourceTransactionManager(dataSource);
>    }
>}
>```
>
>#### SpringMVC核心配置类`SpringMvcConfig`
>
>```java
>package com.mofany.config;
>
>import com.mofany.interceptors.MyInterceptor;
>import org.springframework.beans.factory.annotation.Autowired;
>import org.springframework.context.annotation.Bean;
>import org.springframework.context.annotation.ComponentScan;
>import org.springframework.context.annotation.Configuration;
>import org.springframework.context.annotation.Primary;
>
>import org.springframework.web.multipart.commons.CommonsMultipartResolver;
>import org.springframework.web.servlet.config.annotation.*;
>import org.springframework.web.servlet.view.InternalResourceViewResolver;
>
>
>/**
> * @author MoFany-J
> * @date 2023/1/23
> * @description SpringMvcConfig 自定义SpringMVC配置类
> */
>@Configuration // 配置类标识
>@ComponentScan(basePackages = {"com.mofany.controller"}) // 组件扫描，基于controller包的扫描
>@EnableWebMvc // 开启WebMvc支持
>public class SpringMvcConfig implements WebMvcConfigurer {
>
>    private MyInterceptor myInterceptor;
>
>    /**
>     * 构造器注入
>     * */
>    @Autowired
>    public SpringMvcConfig(MyInterceptor myInterceptor){
>        this.myInterceptor=myInterceptor;
>    }
>
>    /**
>     * 添加拦截器（进行请求的拦截）
>     * */
>    @Override
>    public void addInterceptors(InterceptorRegistry registry) {
>        /**
>         * 对所有除了文件上传的请求进行拦截
>         * */
>        registry.addInterceptor(myInterceptor)
>                .addPathPatterns("/**")
>                .excludePathPatterns("/fileUpload/**");
>    }
>
>    /**
>     * 添加资源处理器（静态资源放行）
>     * */
>    @Override
>    public void addResourceHandlers(ResourceHandlerRegistry registry) {
>        registry.addResourceHandler("/static/**")
>                .addResourceLocations("classpath:/static");
>    }
>
>    /**
>     * 配置全局跨源访问（支持@CrossOrigin注解标识）
>     * */
>    @Override
>    public void addCorsMappings(CorsRegistry registry) {
>        registry.addMapping("/**")
>                .allowedOriginPatterns("*") // 支持所有域名进行跨域访问
>                .allowedHeaders("*")    // 支持所有请求头进行跨域访问
>                .allowedMethods("*");   // 支持所有方法进行跨域访问
>    }
>
>    /**
>     * 配置原生视图解析器方式1：（进行有业务逻辑的视图跳转）
>     * */
>    @Bean(name = "viewResolver")
>    @Primary
>    public InternalResourceViewResolver setViewResolver(){
>        InternalResourceViewResolver viewResolver=new InternalResourceViewResolver();
>        //指定资源路径前缀
>        viewResolver.setPrefix("static/view/");
>        //指定资源路径后缀
>        viewResolver.setSuffix(".jsp");
>        return viewResolver;
>    }
>
>    /**
>     * 配置原生视图解析器方式2：（进行有业务逻辑的视图跳转）
>     * */
>    @Override
>    public void configureViewResolvers(ViewResolverRegistry registry) {
>        registry.jsp("static/view/",".jsp");
>    }
>
>    /**
>     * 添加视图控制器（进行无业务逻辑的视图跳转）
>     * 视图解析器与视图控制器并存时:
>     *  视图解析器的前缀与后缀会作为视图控制器中指定视图的拼接前缀与后缀
>     * */
>    @Override
>    public void addViewControllers(ViewControllerRegistry registry) {
>       /**
>        * 处理跳转至错误页请求
>        * */
>        registry.addViewController("/error")
>                .setViewName("error");
>        /**
>         * 处理跳转至文件上传页的请求
>         * */
>        registry.addViewController("/fileUpload")
>                .setViewName("file/fileupload");
>    }
>
>    /**
>     * 配置文件上传MultipartResolve
>     * */
>    @Bean("multipartResolver")
>    @Primary
>    public CommonsMultipartResolver setMultipartResolver(){
>        CommonsMultipartResolver multipartResolver=new CommonsMultipartResolver();
>        //设置默认编码
>        multipartResolver.setDefaultEncoding("utf-8");
>        //设置资源懒加载
>        multipartResolver.setResolveLazily(true);
>        //设置Servlet上下文
>//        multipartResolver.setServletContext();
>        //设置支持的请求方式
>        multipartResolver.setSupportedMethods("POST","PUT");
>        //设置最大内存大小
>        multipartResolver.setMaxInMemorySize(40960);
>        //设置最大上传大小
>        multipartResolver.setMaxUploadSize(10485760);
>        //设置单个文件的最大上传大小
>        multipartResolver.setMaxUploadSizePerFile(102400);
>        //设置保留原文件名
>        multipartResolver.setPreserveFilename(true);
>        //设置上传的临时目录
>//        multipartResolver.setUploadTempDir(new ClassPathResource("temp"));
>        return multipartResolver;
>    }
>}
>```
>
>#### Web整合`WebIntegrateConfig`
>
>```java
>package com.mofany.config;
>
>import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;
>
>/**
> * @author MoFany-J
> * @date 2023/1/23
> * @description WebIntegrateConfig 自定义web整合类
> */
>public class WebIntegrateConfig extends AbstractAnnotationConfigDispatcherServletInitializer {
>    /**
>     * 整合配置Spring
>     * */
>    @Override
>    protected Class<?>[] getRootConfigClasses() {
>        return new Class[]{SpringBeansConfig.class};
>    }
>
>    /**
>     * 整合配置SpringMVC
>     * */
>    @Override
>    protected Class<?>[] getServletConfigClasses() {
>        return new Class[]{SpringMvcConfig.class};
>    }
>
>    /**
>     * Servlet映射路径
>     * */
>    @Override
>    protected String[] getServletMappings() {
>        return new String[]{"/"};
>    }
>}
>```
>
>#### controller层`控制器层`
>
>* `MyController`登录注册页跳转请求控制器
>
>  ```java
>  package com.mofany.controller;
>  
>  import org.springframework.stereotype.Controller;
>  import org.springframework.web.bind.annotation.CrossOrigin;
>  import org.springframework.web.bind.annotation.GetMapping;
>  import org.springframework.web.servlet.ModelAndView;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/1/25
>   * @description MyController 自定义登录注册请求控制器
>   */
>  @Controller
>  public class MyController {
>  
>      /**
>       * 处理登录页跳转请求（支持跨域）
>       * */
>      @CrossOrigin
>      @GetMapping("login")
>      public ModelAndView requestLogin(){
>          ModelAndView modelAndView=new ModelAndView();
>          modelAndView.setViewName("login");
>          return modelAndView;
>      }
>  
>      /**
>       * 处理注册页跳转请求（支持跨域）
>       * */
>      @CrossOrigin
>      @GetMapping("register")
>      public ModelAndView requestRegister(){
>          ModelAndView modelAndView=new ModelAndView();
>          modelAndView.setViewName("register");
>          return modelAndView;
>      }
>  }
>  ```
>
>* `FileController`文件处理控制器 ***Spring MVC文件上传与下载:yellow_heart:***:yellow_heart:
>
>  ```java
>  package com.mofany.controller;
>  
>  import org.springframework.stereotype.Controller;
>  import org.springframework.ui.Model;
>  import org.springframework.web.bind.annotation.*;
>  import org.springframework.web.multipart.commons.CommonsMultipartFile;
>  
>  
>  import javax.servlet.http.HttpServletRequest;
>  import java.io.*;
>  
>  import java.text.DateFormat;
>  import java.text.SimpleDateFormat;
>  import java.time.LocalDate;
>  import java.util.Date;
>  import java.util.UUID;
>  
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/1/26
>   * @description FileController 文件上传控制器
>   */
>  @Controller
>  public class FileController {
>  
>      /**
>       * 文件上传请求处理程序
>       * */
>      @PostMapping("fileupload")
>      public String fileUploadRequestHandler(@RequestParam("files") CommonsMultipartFile file, Model model, HttpServletRequest request){
>          /**
>           * 1.所有请求皆先判断再处理
>           * */
>          if(!file.isEmpty()){
>              model.addAttribute("content","文件已存在，上传成功!");
>              /**
>               * 2.文件上传的底层逻辑就是简单文件的复制，即关于文件输入输出流的读写。
>               *   使用NIO同步非阻塞IO流进行文件的读写。
>               * */
>              try {
>  
>                  /**
>                   * 构造文件名：构建基于当前工程的相对上传路径
>                   * */
>                  //目标文件名（原文件名+上传日期）
>                  String targetFileName=file.getOriginalFilename();
>                  //文件前缀
>                  String filePrefix=targetFileName
>                      .substring(0,targetFileName.lastIndexOf("."))+'-';
>                  //文件后缀
>                  String fileSuffix=targetFileName.substring(targetFileName.lastIndexOf("."));
>                  //格式化当前日期时间
>                  DateFormat dateFormat=new SimpleDateFormat("YYYY-MM-dd HH:mm:ss:SSS");
>                  String currentDateTime=dateFormat.format(new Date())+':';
>                  currentDateTime=currentDateTime
>                          .replaceFirst("-","年")
>                          .replaceFirst("-","月")
>                          .replaceFirst(" ","日");
>                  currentDateTime=currentDateTime
>                          .replaceFirst(":","时")
>                          .replaceFirst(":","分")
>                          .replaceFirst(":","秒")
>                          .replaceFirst(":","毫秒");
>                  //新文件名（前缀+日期+后缀）
>                  String newTargetFileName=filePrefix+currentDateTime+fileSuffix;
>                  System.out.println("新文件名："+newTargetFileName);
>                  //父目录（workFiles-类型）
>                  String parentDir="workFiles-"+file.getContentType().replaceAll("/","-");
>                  System.out.println("父目录："+parentDir);
>                  //子目录（文件名-上传日期-uuid）
>                  String subDir=filePrefix
>                          +LocalDate.now().toString()
>                          .replaceFirst("-","年")
>                          .replaceFirst("-","月")
>                          .replaceFirst("-","日")
>                          +'-'
>                          +UUID.randomUUID().toString().replace('-','$');
>                  System.out.println("子目录："+subDir);
>                  //构建相对路径
>                  String relativePath="WEB-INF/"+parentDir+'/'+subDir+'/'+newTargetFileName;
>                  //通过相对路径映射绝对路径（获取实际路径时始终获取到的）
>                  String realPath=request.getRealPath(relativePath);
>                  System.out.println("生成的路径："+realPath);
>                  //创建文件
>                  File targetFile=new File(realPath);
>                  //文件的父目录不存在时则创建目录
>                  if (!targetFile.getParentFile().exists()){
>                      if (targetFile.getParentFile().mkdirs()){
>                          System.out.println("父目录创建成功!");
>                      }
>                      
>                      /**
>                      * 将请求获取到的文件上传至目标文件夹中
>                      */
>                      file.transferTo(targetFile);
>                      System.out.println("文件上传成功!");
>                  }
>              } catch (IOException e) {
>                  e.printStackTrace();
>              }
>              return "message/success";
>          }else {
>              model.addAttribute("content","文件不存在，上传失败!");
>              return "message/failure";
>          }
>      }
>  
>      /**
>       * 文件下载请求处理程序
>       * */
>      @PostMapping("filedown")
>      public String fileDownRequestHandler(){
>          
>          return "";
>      }
>  }
>  ```
>
>#### interceptor`自定义拦截器：MyInterceptor`
>
>```java
>package com.mofany.interceptors;
>
>import org.springframework.stereotype.Component;
>import org.springframework.web.servlet.HandlerInterceptor;
>import org.springframework.web.servlet.ModelAndView;
>
>import javax.servlet.http.HttpServletRequest;
>import javax.servlet.http.HttpServletResponse;
>
>/**
> * @author MoFany-J
> * @date 2023/1/26
> * @description MyInterceptor 自定义拦截器
> */
>@Component
>public class MyInterceptor implements HandlerInterceptor {
>    /**
>     * 在Controller处理方法调用前执行
>     * 返回值为true时才会继续执行postHandle与afterHandle
>     * 多个拦截器Interceptor里的preHandle()方法都会在Controller方法调用前率先调用
>     */
>    @Override
>    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
>        HandlerInterceptor.super.preHandle(request, response, handler);
>        return true;
>    }
>
>    /**
>     * 在Controller处理方法完成逻辑处理后，且在返回ModelAndView之前执行
>     */
>    @Override
>    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {
>        HandlerInterceptor.super.postHandle(request, response, handler, modelAndView);
>    }
>
>    /**
>     * 在Controller处理方法调用后执行
>     */
>    @Override
>    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {
>        HandlerInterceptor.super.afterCompletion(request, response, handler, ex);
>    }
>}
>```
>
>#### filter`乱码过滤器：CharacterEncodingFilterUtf8`
>
>```java
>package com.mofany.filter;
>
>
>import javax.servlet.*;
>import javax.servlet.annotation.WebFilter;
>import javax.servlet.http.HttpServletRequest;
>import javax.servlet.http.HttpServletResponse;
>import java.io.IOException;
>
>/**
> * @author MoFany-J
> * @date 2023/1/5
> * @description CharacterEncodingFilterUtf8 自定义请求编码过滤器
> */
>@WebFilter("/*")
>public class CharacterEncodingFilterUtf8 implements Filter{
>    @Override
>    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
>        /**
>         * 请求乱码过滤器
>         */
>        HttpServletRequest httpServletRequest=(HttpServletRequest) request;
>        HttpServletResponse httpServletResponse=(HttpServletResponse)response;
>        httpServletRequest.setCharacterEncoding("UTF-8");
>        httpServletResponse.setCharacterEncoding("UTF-8");
>        chain.doFilter(httpServletRequest,httpServletResponse);
>    }
>}
>```
>
>#### `entity`可序列化的POJO实体类
>
>* `Student`
>
>  ```java
>  package com.mofany.entity;
>  
>  import lombok.Getter;
>  import lombok.NoArgsConstructor;
>  import lombok.Setter;
>  import lombok.ToString;
>  import org.springframework.stereotype.Component;
>  
>  import java.io.Serializable;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/1/25
>   * @description Student
>   */
>  @Component
>  @Setter
>  @Getter
>  @ToString
>  @NoArgsConstructor
>  public class Student implements Serializable {
>      private Integer id;
>      private String name;
>      private String sex;
>      private Short age;
>  }
>  ```
>
>#### mapper`映射器接口层`
>
>* `StudentMapper`映射器接口
>
>  ```java
>  package com.mofany.mapper;
>  
>  import com.mofany.entity.Student;
>  
>  import java.util.List;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/1/25
>   * @description StudentMapper
>   */
>  public interface StudentMapper {
>      /**
>       * 增
>       * */
>      int insertByStudent(Student student);
>  
>      /**
>       * 删
>       * */
>      int deleteById(int id);
>  
>      /**
>       * 查
>       * */
>      List<Student> selectByName(String name);
>  
>      /**
>       * 改
>       * */
>      int updateById(Student student);
>  }
>  ```
>
>* ***映射器接口对应的xml配置文件：***`resources.mapper.StudentMapper.xml`
>
>  ```xml
>  <?xml version="1.0" encoding="UTF-8" ?>
>  <!DOCTYPE mapper
>          PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
>          "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
>  <mapper namespace="com.mofany.mapper.StudentMapper">
>      <resultMap id="BaseResultMap" type="com.mofany.entity.Student">
>          <id property="id" column="id"/>
>          <result property="name" column="name"/>
>          <result property="sex" column="sex"/>
>          <result property="age" column="age"/>
>      </resultMap>
>      <insert id="insertByStudent" parameterType="com.mofany.entity.Student">
>          insert into student
>          values (#{id,jdbcType=INTEGER}, 
>          #{name,jdbcType=VARCHAR}, 
>          #{sex,jdbcType=VARCHAR}, 
>          #{age,jdbcType=SMALLINT})
>      </insert>
>      <delete id="deleteById" parameterType="int">
>          delete
>          from student
>          where id = #{id,jdbcType=INTEGER}
>      </delete>
>      <select id="selectByName" resultMap="BaseResultMap" parameterType="String">
>          select *
>          from student
>          where name = #{name,jdbcType=VARCHAR}
>      </select>
>      <update id="updateById" parameterType="com.mofany.entity.Student">
>          update student
>          set name=#{name,jdbcType=VARCHAR},
>              sex=#{sex,jdbcType=VARCHAR},
>              age=#{age,jdbcType=SMALLINT}
>          where id = #{id,jdbcType=INTEGER}
>      </update>
>  </mapper>
>  ```
>
>#### Service `业务逻辑层`
>
>* `StudentService`
>
>  ```java
>  package com.mofany.service;
>  
>  import com.mofany.entity.Student;
>  
>  import java.util.List;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/1/25
>   * @description StudentService
>   */
>  public interface StudentService {
>      /**
>       * 增
>       * */
>      int insertByStudent(Student student);
>  
>      /**
>       * 删
>       * */
>      int deleteById(int id);
>  
>      /**
>       * 查
>       * */
>      List<Student> selectByName(String name);
>  
>      /**
>       * 改
>       * */
>      int updateById(Student student);
>  }
>  ```
>
>  * ***`Impl`业务逻辑层接口实现类***
>
>    ```java
>    package com.mofany.service.impl;
>    
>    import com.mofany.entity.Student;
>    import com.mofany.mapper.StudentMapper;
>    import com.mofany.service.StudentService;
>    import org.springframework.beans.factory.annotation.Autowired;
>    import org.springframework.stereotype.Service;
>    import org.springframework.transaction.annotation.Propagation;
>    import org.springframework.transaction.annotation.Transactional;
>    
>    import java.util.List;
>    
>    /**
>     * @author MoFany-J
>     * @date 2023/1/25
>     * @description StudentServiceImpl
>     */
>    @Service
>    public class StudentServiceImpl implements StudentService {
>    
>        private StudentMapper studentMapper;
>        /**
>         * 构造器注入
>         * */
>        @Autowired
>        public StudentServiceImpl(StudentMapper studentMapper){
>            this.studentMapper=studentMapper;
>        }
>    
>        /**
>         * 增
>         *
>         * @param student
>         */
>        @Transactional(propagation = Propagation.REQUIRED,
>                       rollbackFor = java.lang.RuntimeException.class)
>        @Override
>        public int insertByStudent(Student student) {
>            return studentMapper.insertByStudent(student);
>        }
>    
>        /**
>         * 删
>         *
>         * @param id
>         */
>        @Override
>        @Transactional(propagation = Propagation.REQUIRED,
>                       rollbackFor = java.lang.RuntimeException.class)
>        public int deleteById(int id) {
>            return studentMapper.deleteById(id);
>        }
>    
>        /**
>         * 查(不支持事务)
>         *
>         * @param name 
>         */
>        @Transactional(propagation = Propagation.NOT_SUPPORTED,
>                       rollbackFor = java.lang.RuntimeException.class)
>        @Override
>        public List<Student> selectByName(String name) {
>            return studentMapper.selectByName(name);
>        }
>    
>        /**
>         * 改
>         *
>         * @param student
>         */
>        @Transactional(propagation = Propagation.REQUIRED,
>                       rollbackFor = java.lang.RuntimeException.class)
>        @Override
>        public int updateById(Student student) {
>            return studentMapper.updateById(student);
>        }
>    }
>    ```
>
>#### `resources.webapp`视图页结构
>
>* static
>
>  * view
>
>    * file
>
>      * `filedown.jsp`
>
>      * `fileupload.jsp`
>
>        ```jsp
>        <%--
>          Created by IntelliJ IDEA.
>          User: jiang
>          Date: 2023/1/26
>          Time: 21:08
>          To change this template use File | Settings | File Templates.
>        --%>
>        <%@ page contentType="text/html;charset=UTF-8" language="java" %>
>        <html>
>        <head>
>            <title>文件上传</title>
>        </head>
>        <body>
>        <form action="fileupload" method="post" enctype="multipart/form-data">
>            请选择要上传的文件：
>            <input name="files" type="file">
>            <input type="submit" value="上传文件">
>        </form>
>        </body>
>        </html>
>        ```
>
>    * message
>
>      * `success.jsp`
>
>        ```jsp
>        <%--
>          Created by IntelliJ IDEA.
>          User: jiang
>          Date: 2023/1/27
>          Time: 11:14
>          To change this template use File | Settings | File Templates.
>        --%>
>        <%@ page contentType="text/html;charset=UTF-8" language="java" %>
>        <html>
>        <head>
>            <title>Failure</title>
>        </head>
>        <body>
>        <h1>${content}</h1>
>        </body>
>        </html>
>        ```
>
>      * `failure.jsp`
>
>        ```jsp
>        <%--
>          Created by IntelliJ IDEA.
>          User: jiang
>          Date: 2023/1/27
>          Time: 0:39
>          To change this template use File | Settings | File Templates.
>        --%>
>        <%@ page contentType="text/html;charset=UTF-8" language="java" %>
>        <html>
>        <head>
>            <title>Success</title>
>        </head>
>        <body>
>        <h1>${content}</h1>
>        </body>
>        </html>
>        ```
>
>    * `error.jsp`
>
>      ```jsp
>      <%--
>        Created by IntelliJ IDEA.
>        User: jiang
>        Date: 2023/1/26
>        Time: 16:41
>        To change this template use File | Settings | File Templates.
>      --%>
>      <%@ page contentType="text/html;charset=UTF-8" language="java" %>
>      <html>
>      <head>
>          <title>错误页</title>
>      </head>
>      <body>
>      <h1>Welcome to error page</h1>
>      </body>
>      </html>
>      ```
>
>    * `login.jsp`
>
>      ```jsp
>      <%--
>        Created by IntelliJ IDEA.
>        User: jiang
>        Date: 2023/1/26
>        Time: 16:42
>        To change this template use File | Settings | File Templates.
>      --%>
>      <%@ page contentType="text/html;charset=UTF-8" language="java" %>
>      <html>
>      <head>
>          <title>登录</title>
>      </head>
>      <body>
>      <h1>Welcome to Login Page</h1>
>      </body>
>      </html>
>      ```
>
>    * `register.jsp`
>
>      ```jsp
>      <%--
>        Created by IntelliJ IDEA.
>        User: jiang
>        Date: 2023/1/26
>        Time: 16:42
>        To change this template use File | Settings | File Templates.
>      --%>
>      <%@ page contentType="text/html;charset=UTF-8" language="java" %>
>      <html lang="en">
>      <head>
>          <title>注册</title>
>      </head>
>      <body>
>      <h1>Welcome to Register Page</h1>
>      </body>
>      </html>
>      ```
>
>* WEB-INF
>
>* `index.jsp`
>
>  ```jsp
>  <%@ page contentType="text/html;charset=utf-8"  %>
>  <html>
>  <head>
>      <title>首页</title>
>      <meta charset="utf-8">
>  </head>
>  <body>
>  <h1>当前位于首页</h1>
>  <a href="login">前往登录页</a>
>  <br>
>  <br>
>  <a href="register">前往注册页</a>
>  <br>
>  <br>
>  <a href="error">前往错误页</a>
>  <br>
>  <br>
>  <a href="fileUpload">文件上传</a>
>  </body>
>  </html>
>  ```
>
>

## SSM整合MyBatis缓存

>
>

## SSM+MyBatis注解法：`旅游项目的CRUD,多表联查模块`

>#### config
>
>* `SpringBeansConfig`spring核心配置类
>
>  ```java
>  package com.mofany.config;
>  
>  import com.alibaba.druid.pool.DruidDataSource;
>  import com.github.pagehelper.PageInterceptor;
>  import org.mybatis.spring.SqlSessionFactoryBean;
>  import org.mybatis.spring.annotation.MapperScan;
>  import org.springframework.beans.factory.annotation.Qualifier;
>  import org.springframework.beans.factory.annotation.Value;
>  import org.springframework.context.annotation.*;
>  import org.springframework.core.io.support.PathMatchingResourcePatternResolver;
>  import org.springframework.jdbc.datasource.DataSourceTransactionManager;
>  import org.springframework.stereotype.Controller;
>  import org.springframework.transaction.annotation.EnableTransactionManagement;
>  
>  import javax.sql.DataSource;
>  import java.io.IOException;
>  import java.util.Properties;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/2/1
>   * @description SpringBeansConfig Spring配置
>   */
>  @Configuration
>  @ComponentScan(
>          basePackages = {"com.mofany"},
>          useDefaultFilters = true,
>          excludeFilters = {@ComponentScan.Filter(value = Controller.class)}
>  )
>  @PropertySource(value = "classpath:db.properties")
>  @MapperScan(basePackages = {"com.mofany.mapper"})
>  @EnableTransactionManagement
>  public class SpringBeansConfig {
>  
>      /**
>       * 配置用户数据源属性
>       */
>      @Value("${jdbc.Driver}")
>      private String driver;
>      @Value("${jdbc.Url}")
>      private String url;
>      @Value("${jdbc.UserName}")
>      private String userName;
>      @Value("${jdbc.Password}")
>      private String password;
>  
>      /**
>       * 配置数据源方法
>       */
>      @Bean(name = "dataSource")
>      @Primary
>      public DataSource setDataSource() {
>          DruidDataSource druidDataSource = new DruidDataSource();
>          druidDataSource.setDriverClassName(driver);
>          druidDataSource.setUrl(url);
>          druidDataSource.setUsername(userName);
>          druidDataSource.setPassword(password);
>          return druidDataSource;
>      }
>  
>      /**
>       * SqlSessionFactoryBean Sql会话工程实例
>       */
>      @Bean(name = "sqlSessionFactory")
>      public SqlSessionFactoryBean setSqlSessionFactory(@Qualifier("dataSource") DataSource dataSource) throws IOException {
>          SqlSessionFactoryBean sqlSessionFactoryBean = new SqlSessionFactoryBean();
>          sqlSessionFactoryBean.setDataSource(dataSource);
>          sqlSessionFactoryBean.setTypeAliasesPackage("com.mofany.entity");
>          sqlSessionFactoryBean.setMapperLocations(
>                  new PathMatchingResourcePatternResolver()
>                          .getResources("classpath*:mapper/*Mapper.xml"));
>          //配置分页插件：pagehelper
>          Properties properties = new Properties();
>          properties.setProperty("helperDialect", "MYSQL");
>          PageInterceptor pageInterceptor = new PageInterceptor();
>          pageInterceptor.setProperties(properties);
>          sqlSessionFactoryBean.setPlugins(pageInterceptor);
>          return sqlSessionFactoryBean;
>      }
>  
>  
>      /**
>       * 声明式事务
>       */
>      @Bean(name = "transactionManager")
>      @Primary
>      public DataSourceTransactionManager setDataSourceTransactionManager(@Qualifier("dataSource") DataSource dataSource) {
>          return new DataSourceTransactionManager(dataSource);
>      }
>  }
>  ```
>
>* `SpringWebMvcConfig`spring mvc核心配置类
>
>  ```java
>  package com.mofany.config;
>  
>  import com.mofany.interceptors.MyInterceptor;
>  import org.springframework.beans.factory.annotation.Qualifier;
>  import org.springframework.context.annotation.Bean;
>  import org.springframework.context.annotation.ComponentScan;
>  import org.springframework.context.annotation.Configuration;
>  import org.springframework.context.annotation.Primary;
>  import org.springframework.web.servlet.config.annotation.*;
>  import org.thymeleaf.spring5.SpringTemplateEngine;
>  import org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver;
>  import org.thymeleaf.spring5.view.ThymeleafViewResolver;
>  import org.thymeleaf.templatemode.TemplateMode;
>  
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/2/1
>   * @description SpringWebMvcConfig SpringMVC配置
>   */
>  @Configuration
>  @ComponentScan(basePackages = {"com.mofany.controller"})
>  @EnableWebMvc
>  public class SpringWebMvcConfig implements WebMvcConfigurer {
>  
>      /**
>       * 添加拦截器
>       * */
>      @Override
>      public void addInterceptors(InterceptorRegistry registry) {
>          registry.addInterceptor(new MyInterceptor()).addPathPatterns("/**");
>      }
>  
>      /**
>       * 添加跨域映射
>       * */
>      @Override
>      public void addCorsMappings(CorsRegistry registry) {
>          registry.addMapping("/**")
>                  .allowedOriginPatterns("*")
>                  .allowedMethods("*")
>                  .allowedHeaders("*");
>      }
>  
>      /**
>       * 整合Thymeleaf：模版解析器
>       * */
>      @Bean(name = "templateResolver")
>      @Primary
>      public SpringResourceTemplateResolver setSpringResourceTemplateResolver(){
>          SpringResourceTemplateResolver templateResolver=new SpringResourceTemplateResolver();
>          templateResolver.setCacheable(false);
>          templateResolver.setTemplateMode(TemplateMode.HTML);
>          templateResolver.setPrefix("/templates/");
>          templateResolver.setSuffix(".html");
>          templateResolver.setCharacterEncoding("UTF-8");
>          return templateResolver;
>      }
>  
>      /**
>       * 整合Thymeleaf：模版引擎
>       * */
>      @Bean(name = "templateEngine")
>      @Primary
>      public SpringTemplateEngine setSpringTemplateEngine(@Qualifier("templateResolver")SpringResourceTemplateResolver templateResolver){
>          SpringTemplateEngine templateEngine=new SpringTemplateEngine();
>          templateEngine.setTemplateResolver(templateResolver);
>          //SpringEl表达式启用
>          templateEngine.setEnableSpringELCompiler(true);
>          return templateEngine;
>      }
>  
>      /**
>       * 整合Thymeleaf：视图解析器
>       * */
>      @Bean(name = "viewResolver")
>      @Primary
>      public ThymeleafViewResolver setThymeleafViewResolver(@Qualifier("templateEngine")SpringTemplateEngine templateEngine){
>          ThymeleafViewResolver thymeleafViewResolver=new ThymeleafViewResolver();
>          thymeleafViewResolver.setTemplateEngine(templateEngine);
>          thymeleafViewResolver.setCharacterEncoding("UTF-8");
>          return thymeleafViewResolver;
>      }
>  
>      /**
>       * 添加视图控制器
>       * */
>      @Override
>      public void addViewControllers(ViewControllerRegistry registry) {
>  
>      }
>  
>      /**
>       * 添加资源处理器
>       * */
>      @Override
>      public void addResourceHandlers(ResourceHandlerRegistry registry) {
>          registry.addResourceHandler("/templates/**").addResourceLocations("/templates/");
>      }
>  }
>  ```
>
>* `WenIntegrateConfig`web配置文件类
>
>  ```java
>  package com.mofany.config;
>  
>  import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/2/1
>   * @description WebIntegrateConfig web整合类
>   */
>  public class WebIntegrateConfig extends AbstractAnnotationConfigDispatcherServletInitializer {
>  
>      /**
>       * Spring配置
>       * */
>      @Override
>      protected Class<?>[] getRootConfigClasses() {
>          return new Class[]{SpringBeansConfig.class};
>      }
>  
>      /**
>       * SpringMvc配置
>       * */
>      @Override
>      protected Class<?>[] getServletConfigClasses() {
>          return new Class[]{SpringWebMvcConfig.class};
>      }
>  
>      /**
>       * 获取DispatcherServlet的映射,
>       * 会将一个或多个路径映射到DispatcherServlet
>       * */
>      @Override
>      protected String[] getServletMappings() {
>          return new String[]{"/"};
>      }
>  }
>  ```
>
>#### controller
>
>* `MyController` 核心控制器类主接口类
>
>  ```java
>  package com.mofany.controller;
>  
>  import com.mofany.entity.ViewPoint;
>  import com.mofany.service.ViewPointService;
>  import com.mofany.util.PagingUtil;
>  import org.springframework.beans.factory.annotation.Autowired;
>  import org.springframework.web.bind.annotation.*;
>  
>  import java.util.*;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/2/1
>   * @description MyController 自定义控制器 包含了前端访问的各个接口
>   */
>  @RestController
>  @RequestMapping(value = "api")
>  public class MyController {
>  
>      /**
>       * 响应结果
>       */
>      private Map<String, Object> responseMap = new HashMap<>();
>  
>      /**
>       * 业务逻辑层接口：执行SQL
>       */
>      private ViewPointService viewPointService;
>  
>      /**
>       * 结果集
>       */
>      private List<ViewPoint> allViewPoint;
>  
>      /**
>       * 构造器注入
>       */
>      @Autowired
>      public MyController(ViewPointService viewPointService) {
>          this.viewPointService = viewPointService;
>      }
>  
>      /**
>       * 旅游景点信息录入请求
>       * 测试接口：http://localhost:8080/viewpoint/api/insertData?id=6&name=大云寺&principal=李丽华&tickets=55&established=2023-2-2 5:5:5&opentime=5:30:0
>       */
>      @GetMapping("insertData")
>      @ResponseBody
>      public Map<String, Object> requestInsertHandler(@ModelAttribute("viewPoint") ViewPoint viewPoint) {
>          //清空响应map
>          responseMap.clear();
>          int result = 0;
>          if (viewPoint == null) {
>              responseMap.put("新增记录数", result);
>              return responseMap;
>          }
>          //新增
>          result = viewPointService.insertByEntity(viewPoint);
>          responseMap.put("新增记录数", result);
>          return responseMap;
>      }
>  
>      /**
>       * 旅游景点信息删除与批量删除请求
>       * 测试接口：http://localhost:8080/viewpoint/api/deleteData
>       * @param ids 传入json或请求字符串
>       */
>      @DeleteMapping("deleteData")
>      @ResponseBody
>      public Map<String, Object> requestDeleteHandler(@RequestBody Map<String,Object> ids) {
>          //清空响应map
>          responseMap.clear();
>          int result = 0;
>          if (ids == null) {
>              responseMap.put("删除记录数", result);
>              return responseMap;
>          }
>          //获取值的列表
>          List<Object> list=(ArrayList)ids.get("ids");
>          //删除与批量删除
>          result = viewPointService.deleteByIds(list);
>          responseMap.put("删除记录数", result);
>          return responseMap;
>      }
>  
>      /***
>       * 旅游景点信息的更新请求处理
>       * 测试接口：http://localhost:8080/viewpoint/api/updateData?id=6&principal=李文卓&tickets=58
>       * */
>      @GetMapping("updateData")
>      @ResponseBody
>      public Map<String, Object> requestUpdateHandler(@ModelAttribute("viewpoint") ViewPoint viewPoint) {
>          //清空响应map
>          responseMap.clear();
>          int result = 0;
>          if (viewPoint == null) {
>              responseMap.put("更新记录数", result);
>              return responseMap;
>          }
>          //更新
>          result = viewPointService.updateByEntity(viewPoint);
>          responseMap.put("更新记录数", result);
>          return responseMap;
>      }
>  
>      /**
>       * 多条件查询
>       * 测试接口：http://localhost:8080/viewpoint/api/queryData
>       */
>      @GetMapping("queryData")
>      @ResponseBody
>      public Map<String, Object> requestShowHandler(@ModelAttribute("viewPoint") ViewPoint viewPoint) {
>          //清空响应map
>          responseMap.clear();
>          if (viewPoint == null) {
>              responseMap.put("queryResult", 0);
>              return responseMap;
>          }
>          ViewPoint entity = viewPointService.selectByEntity(viewPoint);
>          responseMap.put("queryResult", entity);
>          return responseMap;
>      }
>  
>      /**
>       * 旅游景点并分页展示+所属公司名
>       * 测试接口：http://localhost:8080/viewpoint/api/showData/1
>       */
>      @GetMapping("showData/{currentPage}")
>      @ResponseBody
>      public Map<String, Object> requestShowHandler(@PathVariable("currentPage") int currentPage) {
>          //清空响应map
>          responseMap.clear();
>          //一次性取出全部景点信息
>          if (allViewPoint == null) {
>              allViewPoint = viewPointService.SelectByPage();
>          }
>          /**
>           * 调用自定义分页的插件，每页显示三条记录
>           * */
>          responseMap.put("queryResults", PagingUtil.paging(allViewPoint, currentPage, 3));
>          return responseMap;
>      }
>  
>      /**
>       * 多条件查询旅游景点并分页展示+所属公司名
>       * 测试接口：http://localhost:8080/viewpoint/api/showDataByCondition/1?name=骊山
>       */
>      @GetMapping("showDataByCondition/{currentPage}")
>      @ResponseBody
>      public Map<String, Object> requestShowByConditionHandler(@PathVariable("currentPage") int currentPage, @ModelAttribute("viewPoint") ViewPoint viewPoint) {
>          //清空响应map
>          responseMap.clear();
>          //一次性取出全部景点信息
>          if (allViewPoint == null) {
>              allViewPoint = viewPointService.SelectByPages(viewPoint);
>          }
>          /**
>           * 调用自定义分页的插件，每页显示三条记录
>           * */
>          responseMap.put("queryResults", PagingUtil.paging(allViewPoint, currentPage, 3));
>          return responseMap;
>      }
>  }
>  ```
>
>* `MyControllerAdvice`全局数据绑定控制器类`用于处理get请求参数中日期时间格式转换问题`
>
>  ```java
>  package com.mofany.controller;
>  
>  import com.mofany.converters.DateConvert;
>  import com.mofany.converters.TimeConvert;
>  import org.springframework.beans.factory.annotation.Autowired;
>  import org.springframework.core.convert.ConversionService;
>  import org.springframework.core.convert.support.GenericConversionService;
>  import org.springframework.web.bind.WebDataBinder;
>  import org.springframework.web.bind.annotation.ControllerAdvice;
>  import org.springframework.web.bind.annotation.InitBinder;
>  
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/2/2
>   * @description MyControllerAdvice 定义全局数据绑定器
>   */
>  @ControllerAdvice
>  public class MyControllerAdvice {
>      private DateConvert dateConvert;
>      private TimeConvert timeConvert;
>  
>      /**
>       * 构造器注入
>       * */
>      @Autowired
>      public MyControllerAdvice(DateConvert dateConvert,TimeConvert timeConvert){
>          this.dateConvert=dateConvert;
>          this.timeConvert=timeConvert;
>      }
>  
>      /**
>       * 使用日期转换器
>       * */
>      @InitBinder
>      public void dateTypeBinder(WebDataBinder webDataBinder){
>          //获取转换服务对象
>          ConversionService conversionService=webDataBinder.getConversionService();
>          //判断conversionService是否为GenericConversionService类型
>          if (conversionService instanceof GenericConversionService){
>              //强制类型转换
>              GenericConversionService genericConversionService=(GenericConversionService) conversionService;
>              //添加类型转换器
>              genericConversionService.addConverter(dateConvert);
>          }
>      }
>  
>      /**
>       * 使用时间转换器
>       * */
>      @InitBinder
>      public void timeTypeBinder(WebDataBinder webDataBinder){
>          //获取转换服务对象
>          ConversionService conversionService=webDataBinder.getConversionService();
>          //判断conversionService是否为GenericConversionService类型
>          if (conversionService instanceof GenericConversionService){
>              //强制类型转换
>              GenericConversionService genericConversionService=(GenericConversionService) conversionService;
>              //添加类型转换器
>              genericConversionService.addConverter(timeConvert);
>          }
>      }
>  }
>  ```
>
>#### converters`日期时间转换器`
>
>* 日期转换器类：`在进入控制器前执行，@ModelAttribute注解进行实体属性映射前执行`
>
>  ```java
>  package com.mofany.converters;
>  
>  
>  import org.springframework.core.convert.converter.Converter;
>  import org.springframework.stereotype.Component;
>  
>  import java.text.ParseException;
>  import java.text.SimpleDateFormat;
>  import java.util.Date;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/2/2
>   * @description DateConvert 自定义日期时间转换器类
>   */
>  @Component
>  public class DateConvert implements Converter<String, Date> {
>  
>  
>      @Override
>      public Date convert(String source) {
>          SimpleDateFormat dateFormat=new SimpleDateFormat("YYYY-MM-dd HH:mm:ss");
>          try {
>              Date date=dateFormat.parse(source);
>              return date;
>          } catch (ParseException e) {
>              e.printStackTrace();
>          }
>          return null;
>      }
>  }
>  ```
>
>* 时间转换器类：`在进入控制器的请求参数映射前执行，@ModelAttribute注解进行实体属性映射前执行`
>
>  ```java
>  package com.mofany.converters;
>  
>  import org.springframework.core.convert.converter.Converter;
>  import org.springframework.stereotype.Component;
>  
>  import java.sql.Time;
>  import java.text.ParseException;
>  import java.text.SimpleDateFormat;
>  import java.util.Date;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/2/3
>   * @description TimeConvert 自定义时间转换器
>   */
>  @Component
>  public class TimeConvert implements Converter<String, Time> {
>  
>      @Override
>      public Time convert(String source) {
>          SimpleDateFormat dateFormat=new SimpleDateFormat("HH:mm:ss");
>          try {
>              Date parse = dateFormat.parse(source);
>              Time time=new Time(parse.getHours(),parse.getMinutes(),parse.getSeconds());
>              return time;
>          } catch (ParseException e) {
>              e.printStackTrace();
>          }
>          return null;
>      }
>  }
>  ```
>
>#### entity
>
>* 所属公司：`AffiliatedCompany`
>
>  ```java
>  package com.mofany.entity;
>  
>  import com.fasterxml.jackson.annotation.JsonFormat;
>  import lombok.Getter;
>  import lombok.NoArgsConstructor;
>  import lombok.Setter;
>  import lombok.ToString;
>  import org.springframework.stereotype.Component;
>  
>  import java.io.Serializable;
>  import java.util.Date;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/2/1
>   * @description AffiliatedCompany 所属公司
>   */
>  @Component
>  @Setter
>  @Getter
>  @ToString
>  @NoArgsConstructor
>  public class AffiliatedCompany implements Serializable {
>      /**
>       * 公司编号
>       * */
>      private Integer id;
>  
>      /**
>       * 公司名
>       * */
>      private String name;
>  
>      /**
>       * 公司法人
>       * */
>      private String legal_person;
>  
>      /**
>       * 公司地址
>       * */
>      private String address;
>  
>      /**
>       * 成立时间,get、post请求用@JsonFormat注解规范日期时间显示格式
>       * */
>      @JsonFormat(pattern = "YYYY-MM-ddd HH:mm:ss")
>      private Date established;
>  }
>  ```
>
>* 旅游景点：`ViewPoint`
>
>  ```java
>  package com.mofany.entity;
>  
>  import com.fasterxml.jackson.annotation.JsonFormat;
>  import lombok.Getter;
>  import lombok.NoArgsConstructor;
>  import lombok.Setter;
>  import lombok.ToString;
>  import org.springframework.stereotype.Component;
>  
>  import java.io.Serializable;
>  import java.math.BigDecimal;
>  import java.sql.Time;
>  import java.util.Date;
>  import java.util.List;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/2/1
>   * @description ViewPoint 景点
>   */
>  @Component
>  @Setter
>  @Getter
>  @ToString
>  @NoArgsConstructor
>  public class ViewPoint implements Serializable {
>      /**
>       * 景点编号
>       * */
>      private Integer id;
>  
>      /**
>       * 景点名
>       * */
>      private String name;
>  
>      /**
>       * 景点负责人
>       * */
>      private String principal;
>  
>      /**
>       * 门票
>       * */
>      private BigDecimal tickets;
>  
>      /**
>       * 成立时间,get、post请求用@JsonFormat注解规范日期时间显示格式
>       * */
>      @JsonFormat(pattern = "YYYY-MM-dd HH:mm:ss")
>      private Date established;
>  
>      /**
>       * 开放时间,get、post请求用@JsonFormat注解规范日期时间显示格式
>       * */
>      @JsonFormat(pattern = "HH:mm:ss")
>      private Time opentime;
>  
>      /**
>       * 所属公司
>       * */
>      private List<AffiliatedCompany> companyList;
>  }
>  ```
>
>#### interceptors
>
>* 编码拦截器：`MyInterceptor`
>
>  ```java
>  package com.mofany.interceptors;
>  
>  
>  import org.springframework.web.servlet.HandlerInterceptor;
>  
>  
>  import javax.servlet.http.HttpServletRequest;
>  import javax.servlet.http.HttpServletResponse;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/2/1
>   * @description MyInterceptor 自定义编码拦截器
>   */
>  public class MyInterceptor implements HandlerInterceptor {
>  
>      /**
>       * 控制器处理方法前调用
>       * */
>      @Override
>      public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
>          request.setCharacterEncoding("utf-8");
>          response.setCharacterEncoding("utf-8");
>          HandlerInterceptor.super.preHandle(request, response, handler);
>          return true;
>      }
>  }
>  ```
>
>#### mapper
>
>* 映射器接口：`ViewPointMapper`
>
>  ```java
>  package com.mofany.mapper;
>  
>  import com.mofany.entity.ViewPoint;
>  
>  import java.util.List;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/2/1
>   * @description ViewPointMapper
>   */
>  public interface ViewPointMapper {
>  
>      /**
>       * 新增一条旅游景记录
>       * */
>      int insertByEntity(ViewPoint viewPoint);
>  
>      /**
>       * 删除与批量删除旅游景点记录
>       * */
>      int deleteByIds(List ids);
>  
>      /**
>       * 旅游景点信息的修改
>       * */
>      int updateByEntity(ViewPoint viewPoint);
>  
>      /**
>       * 多条件查询
>       * */
>      ViewPoint selectByEntity(ViewPoint viewPoint);
>  
>      /**
>       * 分页联合查询
>       * */
>      List<ViewPoint> SelectByPage();
>  
>      /**
>       * 多条件分页联合查询
>       * */
>      List<ViewPoint> SelectByPages(ViewPoint viewPoint);
>  }
>  ```
>
>#### service
>
>* 业务逻辑层接口：`ViewPointService`
>
>  ```java
>  package com.mofany.service;
>  
>  import com.mofany.entity.ViewPoint;
>  
>  import java.util.List;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/2/1
>   * @description ViewPointService
>   */
>  public interface ViewPointService {
>  
>      /**
>       * 新增
>       * */
>      int insertByEntity(ViewPoint viewPoint);
>  
>      /**
>       * 删除与批量删除旅游景点记录
>       * */
>      int deleteByIds(List ids);
>  
>      /**
>       * 旅游景点信息的修改
>       * */
>      int updateByEntity(ViewPoint viewPoint);
>  
>      /**
>       * 按实体字段进行多条件查询
>       * */
>      ViewPoint selectByEntity(ViewPoint viewPoint);
>  
>      /**
>       * 分页联合查询
>       * */
>      List<ViewPoint> SelectByPage();
>  
>      /**
>       * 多条件分页联合查询
>       * */
>      List<ViewPoint> SelectByPages(ViewPoint viewPoint);
>  }
>  ```
>
>  * `impl`接口实现类：`ViewPointServiceImpl`
>
>    ```java
>    package com.mofany.service.impl;
>    
>    import com.mofany.entity.ViewPoint;
>    import com.mofany.mapper.ViewPointMapper;
>    import com.mofany.service.ViewPointService;
>    import org.springframework.beans.factory.annotation.Autowired;
>    import org.springframework.stereotype.Service;
>    import org.springframework.transaction.annotation.Propagation;
>    import org.springframework.transaction.annotation.Transactional;
>    
>    import java.util.List;
>    
>    /**
>     * @author MoFany-J
>     * @date 2023/2/1
>     * @description ViewPointServiceImpl
>     */
>    @Service
>    public class ViewPointServiceImpl implements ViewPointService {
>    
>        private ViewPointMapper viewPointMapper;
>        /**
>         * 构造器注入
>         * */
>        @Autowired
>        public ViewPointServiceImpl(ViewPointMapper viewPointMapper){
>            this.viewPointMapper=viewPointMapper;
>        }
>    
>        /**
>         * 按实体插入
>         * */
>        @Transactional(propagation = Propagation.REQUIRED,rollbackFor = java.lang.RuntimeException.class)
>        @Override
>        public int insertByEntity(ViewPoint viewPoint) {
>            return viewPointMapper.insertByEntity(viewPoint);
>        }
>    
>        /**
>         * 删除与批量删除旅游景点记录
>         *
>         * @param ids
>         */
>        @Transactional(propagation = Propagation.REQUIRED,rollbackFor = java.lang.RuntimeException.class)
>        @Override
>        public int deleteByIds(List ids) {
>            return viewPointMapper.deleteByIds(ids);
>        }
>    
>        /**
>         * 旅游景点信息的修改
>         *
>         * @param viewPoint
>         */
>        @Transactional(propagation = Propagation.REQUIRED,rollbackFor = java.lang.RuntimeException.class)
>        @Override
>        public int updateByEntity(ViewPoint viewPoint) {
>            return viewPointMapper.updateByEntity(viewPoint);
>        }
>    
>    
>        /**
>         * 按实体字段进行多条件查询
>         *
>         * @param viewPoint
>         */
>        @Transactional(propagation = Propagation.NOT_SUPPORTED)
>        @Override
>        public ViewPoint selectByEntity(ViewPoint viewPoint) {
>            return viewPointMapper.selectByEntity(viewPoint);
>        }
>    
>        /**
>         * 分页联合查询
>         *
>         *
>         */
>        @Override
>        public List<ViewPoint> SelectByPage() {
>            return viewPointMapper.SelectByPage();
>        }
>    
>        /**
>         * 多条件分页联合查询
>         */
>        @Override
>        public List<ViewPoint> SelectByPages(ViewPoint viewPoint) {
>            return viewPointMapper.SelectByPages(viewPoint);
>        }
>    }
>    ```
>
>#### util
>
>* 自定义分页工具类：`PagingUtil`
>
>  ```java
>  package com.mofany.util;
>  
>  import java.util.List;
>  
>  /**
>   * @author MoFany-J
>   * @date 2023/2/4
>   * @description PagingUtil 自定义假分页工具类
>   */
>  public class PagingUtil {
>  
>      /**
>       * 不允许反射创建该类对象
>       */
>      private PagingUtil() {
>          throw new RuntimeException("禁止反射！");
>      }
>  
>      /**
>       * @param data        要分页的数据源
>       * @param currentPage 当前页
>       * @param pageSize    每页的记录数
>       */
>      public static List<Object> paging(List data, int currentPage, int pageSize) {
>          /**
>           * 对数据源的非空性与长度非0性的判断
>           * */
>          if (data == null || data.size() == 0) {
>              return null;
>          }
>          //最大页码
>          int mxaPage = 0;
>          //剩余记录数
>          int remainingSize = 0;
>          //先计算终点下标
>          int endIndex = currentPage * pageSize;
>          //后计算起点下标
>          int startIndex = endIndex - pageSize;
>          //查询的结果集
>          List resultData = null;
>          /**
>           * 计算最大页与剩余记录：mxaPage = (int) Math.ceil(data.size() / (pageSize * 1.0));
>           * */
>          int pages = data.size() / pageSize;
>          mxaPage = (data.size() / (pageSize * 1.0)) > pages ? pages + 1 : pages;
>          remainingSize = data.size() % pageSize;
>          System.out.println("总页数：" + mxaPage);
>          System.out.println("当前页：" + currentPage);
>          System.out.println("总记录数：" + data.size());
>          System.out.println("每页记录数：" + pageSize);
>          System.out.println("剩余记录数" + remainingSize);
>          //请求当前页不符合规范抛异常
>          if (currentPage < 1 || currentPage > mxaPage) {
>              throw new IllegalArgumentException("1 <= currentPage <=" + mxaPage);
>          }
>          /**
>           * 每次请求的页码范围的判断
>           * */
>          if (currentPage >= 1 && currentPage < mxaPage) {
>              //最后一页之前
>              resultData = data.subList(startIndex, endIndex);
>          } else if (currentPage == mxaPage) {
>              //最后一页
>              resultData = data.subList(startIndex, startIndex + remainingSize);
>          }
>          return resultData;
>      }
>  }
>  ```
>
>#### resources
>
>* **mapper**`ViewPointMapper.xml`
>
>  ```xml
>  <?xml version="1.0" encoding="UTF-8" ?>
>  <!DOCTYPE mapper
>          PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
>          "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
>  <mapper namespace="com.mofany.mapper.ViewPointMapper">
>      <!--  一个景点由多家旅游公司合作共同经营，即有多个所属公司，故景点与所属公司是一对多的关系  -->
>      <resultMap id="BaseResultMap" type="com.mofany.entity.ViewPoint">
>          <id property="id" column="id"/>
>          <result property="name" column="viewpointName"/>
>          <result property="principal" column="principal"/>
>          <result property="tickets" column="tickets"/>
>          <result property="established" column="established"/>
>          <result property="opentime" column="opentime"/>
>          <!--   显示所属公司信息     -->
>          <collection property="companyList" ofType="com.mofany.entity.AffiliatedCompany">
>              <id property="id" column="companyId"/>
>              <result property="name" column="companyName"/>
>              <result property="legal_person" column="legalPerson"/>
>              <result property="address" column="address"/>
>              <result property="established" column="companyEstablished"/>
>          </collection>
>      </resultMap>
>      <!--  MyBatis动态Sql实现：景点信息多条件查询  -->
>      <select id="selectByEntity" resultType="com.mofany.entity.ViewPoint" 
>              								parameterType="com.mofany.entity.ViewPoint">
>          select *
>          from viewpoint
>          <where>
>              <if test="id != null">
>                  or id = #{id,jdbcType=INTEGER}
>              </if>
>              <if test="name != null and name != ''">
>                  or name = #{name,jdbcType=VARCHAR}
>              </if>
>              <if test="principal != null and principal != ''">
>                  or principal = #{principal,jdbcType=VARCHAR}
>              </if>
>              <if test="tickets != null">
>                  or tickets = #{tickets,jdbcType=DECIMAL}
>              </if>
>              <if test="established != null">
>                  or established = #{established,jdbcType=TIMESTAMP}
>              </if>
>              <if test="opentime != null">
>                  or opentime = #{opentime,jdbcType=TIME}
>              </if>
>          </where>
>      </select>
>  
>      <!--  MyBatis动态Sql实现：按实体插入  -->
>      <insert id="insertByEntity" parameterType="com.mofany.entity.ViewPoint">
>          insert into viewpoint
>          values (#{id,jdbcType=INTEGER}, #{name,jdbcType=VARCHAR}, 
>          		#{principal,jdbcType=VARCHAR},
>                  #{tickets,jdbcType=DECIMAL}, 
>          		#{established,jdbcType=TIMESTAMP}, 
>          		#{opentime,jdbcType=TIME})
>      </insert>
>  
>      <!--  MyBatis动态Sql实现：按id对景点信息的修改  -->
>      <update id="updateByEntity" parameterType="com.mofany.entity.ViewPoint">
>          update viewpoint
>          <set>
>              <if test="name != null and name != ''">
>                  name=#{name,jdbcType=VARCHAR},
>              </if>
>              <if test="principal != null and principal != ''">
>                  principal=#{principal,jdbcType=VARCHAR},
>              </if>
>              <if test="tickets != null">
>                  tickets=#{tickets,jdbcType=DECIMAL},
>              </if>
>              <if test="established != null">
>                  established=#{established,jdbcType=TIMESTAMP},
>              </if>
>              <if test="opentime != null">
>                  opentime=#{opentime,jdbcType=TIME}
>              </if>
>          </set>
>          where id = #{id,jdbcType=INTEGER}
>      </update>
>  
>      <!--  MyBatis动态Sql实现：删除与批量删除
>        parameterType=int[]
>        collection=array
>        -->
>      <delete id="deleteByIds" parameterType="java.util.List">
>          delete
>          from viewpoint
>          <where>
>              id in
>              <foreach item="ids" collection="list" open="(" separator="," close=")">
>                  #{ids}
>              </foreach>
>          </where>
>      </delete>
>  
>      <!--  分页显示并联合查询  -->
>      <select id="SelectByPage" resultMap="BaseResultMap">
>          select A.id,
>                 A.name         as viewpointName,
>                 A.principal,
>                 A.tickets,
>                 A.established,
>                 A.opentime,
>                 C.id           as companyId,
>                 C.name         as companyName,
>                 C.legal_person as legalPerson,
>                 C.address,
>                 C.established  as companyEstablished
>          from viewpoint as A
>                       join relation as B on A.id = B.viewpoint_id
>                       join affiliated_company as C on C.id = B.company_id
>      </select>
>  
>      <!-- 多条件分页显示并联合查询 -->
>      <select id="SelectByPages" resultMap="BaseResultMap" 
>              									parameterType="com.mofany.entity.ViewPoint">
>          select A.id,
>                 A.name         as viewpointName,
>                 A.principal,
>                 A.tickets,
>                 A.established,
>                 A.opentime,
>                 C.id           as companyId,
>                 C.name         as companyName,
>                 C.legal_person as legalPerson,
>                 C.address,
>                 C.established  as companyEstablished
>          from viewpoint as A
>                       join relation as B on A.id = B.viewpoint_id
>                       join affiliated_company as C on C.id = B.company_id
>          <where>
>              <if test="id != null">
>                  or id = #{id,jdbcType=INTEGER}
>              </if>
>              <if test="name != null and name != ''">
>                  or A.name = #{name,jdbcType=VARCHAR}
>              </if>
>              <if test="principal != null and principal != ''">
>                  or principal = #{principal,jdbcType=VARCHAR}
>              </if>
>              <if test="tickets != null">
>                  or tickets = #{tickets,jdbcType=DECIMAL}
>              </if>
>              <if test="established != null">
>                  or A.established = #{established,jdbcType=TIMESTAMP}
>              </if>
>              <if test="opentime != null">
>                  or opentime = #{opentime,jdbcType=TIME}
>              </if>
>          </where>
>      </select>
>  </mapper>
>  ```
>
>#### 测试类
>
>```java
>package com.mofany.test;
>
>import com.mofany.config.SpringBeansConfig;
>import com.mofany.entity.ViewPoint;
>import com.mofany.service.ViewPointService;
>import org.junit.Test;
>import org.junit.runner.RunWith;
>import org.springframework.beans.factory.annotation.Autowired;
>import org.springframework.test.context.ContextConfiguration;
>import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
>import org.springframework.test.context.web.WebAppConfiguration;
>
>import java.math.BigDecimal;
>import java.sql.Time;
>import java.text.ParseException;
>import java.text.SimpleDateFormat;
>import java.util.Date;
>import java.util.List;
>
>/**
> * @author MoFany-J
> * @date 2023/2/1
> * @description ViewPointServiceTest 单元测试
> */
>@RunWith(SpringJUnit4ClassRunner.class)
>@ContextConfiguration(classes = {SpringBeansConfig.class})
>@WebAppConfiguration("src/main/resources")
>public class ViewPointServiceTest {
>    @Autowired
>    private ViewPoint viewPoint;
>
>    @Autowired
>    private ViewPointService viewPointService;
>
>    /**
>     * 多条件查询（ok）
>     * */
>    @Test
>    public void test1(){
>        viewPoint.setName("崆峒山");
>        //负责人
>        viewPoint.setPrincipal("蒋明辉");
>        //门票
>        viewPoint.setTickets(BigDecimal.valueOf(50));
>        System.out.println(viewPointService.selectByEntity(viewPoint));
>    }
>
>    /**
>     * 插入景点数据（ok）
>     * */
>    @Test
>    public void test2(){
>        SimpleDateFormat dateFormat=new SimpleDateFormat("YYYY-MM-dd HH:mm:ss");
>        viewPoint.setId(5);
>        viewPoint.setName("雷锋塔");
>        //负责人
>        viewPoint.setPrincipal("法海");
>        //门票
>        viewPoint.setTickets(BigDecimal.valueOf(70));
>        //成立时间
>        try {
>            viewPoint.setEstablished(dateFormat.parse(dateFormat.format(new Date())));
>        } catch (ParseException e) {
>            e.printStackTrace();
>        }
>        //开放时间
>        viewPoint.setOpentime(new Time(6,30,00));
>
>        System.out.println(viewPointService.insertByEntity(viewPoint));
>    }
>
>    /**
>     * 按id动态修改景点数据（业务ok）
>     * */
>    @Test
>    public void test3(){
>        SimpleDateFormat dateFormat=new SimpleDateFormat("YYYY-MM-dd HH:mm:ss");
>        viewPoint.setId(1);
>        //负责人
>        viewPoint.setPrincipal("默凡语");
>        //门票
>        viewPoint.setTickets(BigDecimal.valueOf(120));
>        //成立时间
>        try {
>            viewPoint.setEstablished(dateFormat.parse(dateFormat.format(new Date())));
>        } catch (ParseException e) {
>            e.printStackTrace();
>        }
>        //开放时间
>        viewPoint.setOpentime(new Time(8,40,00));
>
>        System.out.println(viewPointService.updateByEntity(viewPoint));
>    }
>
>    /**
>     * 批量删除景点记录（ok）
>     * */
>    @Test
>    public void test4(){
>        List list=List.of(3,4);
>        System.out.println(viewPointService.deleteByIds(list));
>    }
>
>    /**
>     * 分页显示：景点信息+所属公司名
>     * */
>    @Test
>    public void test5(){
>        viewPointService.SelectByPage().stream().forEach(System.out::println);
>    }
>
>    /**
>     * 多条件查询分页显示：景点信息+所属公司
>     * */
>    @Test
>    public void test6(){
>        //多条件查询查询票价为50的旅游景点
>        viewPoint.setTickets(BigDecimal.valueOf(50));
>        viewPointService.SelectByPages(viewPoint).stream().forEach(System.out::println);
>    }
>}
>```
>
>